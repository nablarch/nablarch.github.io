


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.2.5. Internal Forward Handler &mdash; ∇Nablarch  6u1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/application_framework/application_framework/handlers/web/forwarding_handler.html" />
  
    <link rel="top" title="∇Nablarch  6u1 documentation" href="../../../../index.html"/>
        <link rel="up" title="6.2. Web Application Dedicated Handler" href="index.html"/>
        <link rel="next" title="6.2.6. Resource Mapping Handler" href="resource_mapping.html"/>
        <link rel="prev" title="6.2.4. HTTP Error Control Handler" href="HttpErrorHandler.html"/>

<script defer data-domain="nablarch.github.io,all.fintan" src=https://plausible.io/js/script.js></script>


  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 6u1</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../about_nablarch/index.html">What is the Nablarch?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/concept.html">Nablarch Concept</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/mvn_module.html">Module List of Nablarch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/license.html">Information on Nablarch License</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Nablarch Application Framework</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Application Framework</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../nablarch/index.html">1. What is Nablarch Application Framework?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../web/index.html">2. Web Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../web_service/index.html">3. Web Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../batch/index.html">4. Batch Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../messaging/index.html">5. Messaging</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">6. Standard Handler Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../libraries/index.html">7. Libraries Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../blank_project/index.html">8. Blank Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../setting_guide/index.html">9. Nablarch Application Framework Configuration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../configuration/index.html">10. Default Configuration List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cloud_native/index.html">11. Nablarch Cloud Native Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../adaptors/index.html">Adaptor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/log_adaptor.html">log Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/router_adaptor.html">Routing Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/webspheremq_adaptor.html">IBM MQ Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/jaxrs_adaptor.html">Jakarta RESTful Web Services Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/doma_adaptor.html">Doma Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/jsr310_adaptor.html">JSR310(Date and Time API)Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarker Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/mail_sender_velocity_adaptor.html">E-mail Velocity Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/web_thymeleaf_adaptor.html">Web Application Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/lettuce_adaptor.html">Lettuce Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/slf4j_adaptor.html">SLF4J Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../adaptors/micrometer_adaptor.html">Micrometer Adapter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../example/index.html">Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../example/index.html#procedure-to-build-the-environment">Procedure to build the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../example/index.html#application-execution-procedure">Application execution procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../example/index.html#running-on-java-21">Running on Java 21</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development_tools/index.html">Nablarch development tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../development_tools/java_static_analysis/index.html">1. Efficient Java Static Checks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/java_static_analysis/index.html#run-inspection">1.1. Run inspection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/java_static_analysis/index.html#unify-the-format">1.2. Unify the format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/java_static_analysis/index.html#check-if-unauthorized-apis-are-being-used">1.3. Check if unauthorized APIs are being used</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../development_tools/testing_framework/index.html">2. Testing framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/testing_framework/guide/development_guide/05_UnitTestGuide/index.html">2.1. How to Execute Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/testing_framework/guide/development_guide/06_TestFWGuide/index.html">2.2. How to Use the Automated Test Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/testing_framework/guide/development_guide/08_TestTools/index.html">2.3. Tools Used in the Programming Phase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../development_tools/toolbox/index.html">3. Useful Tools When Developing Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/toolbox/JspStaticAnalysis/index.html">3.1. Jakarta Server Pages Static Analysis Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../development_tools/toolbox/SqlExecutor/SqlExecutor.html">3.2. Nablarch SQL Executor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nablarch_api/index.html">Nablarch API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../about_nablarch/versionup_policy.html">Nablarch upgrade policy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/versionup_policy.html#release-unit">Release unit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/versionup_policy.html#types-of-upgrades">Types of upgrades</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/versionup_policy.html#version-numbering-system">Version numbering system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../about_nablarch/versionup_policy.html#backward-compatibility-policy">Backward compatibility policy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/versionup_policy.html#extent-to-which-backward-compatibility-is-maintained">Extent to which backward compatibility is maintained</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/versionup_policy.html#contents-of-backward-compatibility-maintenance">Contents of backward compatibility maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../about_nablarch/versionup_policy.html#backward-compatibility-exception">Backward compatibility exception</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../migration/index.html">Nablarch 5 to 6 Migration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../migration/index.html#major-differences-between-nablarch-5-and-6">Major differences between Nablarch 5 and 6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../migration/index.html#supports-jakarta-ee-10">Supports Jakarta EE 10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../migration/index.html#changed-required-java-version-to-17">Changed  required Java version to 17</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../migration/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../migration/index.html#overview-of-migration-steps">Overview of migration steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../migration/index.html#details-of-migration-steps">Details of migration steps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../migration/index.html#nablarch-version-upgrade">Nablarch version upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../migration/index.html#compatible-with-jakarta-ee">Compatible with Jakarta EE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../migration/index.html#migration-procedure-of-jsr352-compliant-batch-application">Migration procedure of JSR352-compliant Batch Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../migration/index.html#what-to-do-if-an-error-occurs-during-execution">What to do if an error occurs during execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../migration/index.html#appendix">Appendix</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../migration/index.html#correspondence-table-between-java-ee-and-jakarta-ee-specifications">Correspondence table between Java EE and Jakarta EE specifications</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../jakarta_ee/index.html">Regarding the specification name of Jakarta EE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../jakarta_ee/index.html#regarding-the-notation-of-acronyms">Regarding the notation of acronyms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../jakarta_ee/index.html#regarding-features-that-have-been-renamed-in-nablarch-5-and-6">Regarding features that have been renamed in Nablarch 5 and 6</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../terms_of_use/index.html">Terms of Use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../terms_of_use/index.html#external-transmssion-of-information">External Transmssion of Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../terms_of_use/index.html#purpose-of-information-use">Purpose of Information Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../terms_of_use/index.html#destination-of-information">Destination of information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../terms_of_use/index.html#type-and-use-of-information">Type and use of information</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../index.html">Nablarch Application Framework</a> &raquo;</li>
      
          <li><a href="../../index.html">Application Framework</a> &raquo;</li>
      
          <li><a href="../index.html">6. Standard Handler Provided by Nablarch</a> &raquo;</li>
      
          <li><a href="index.html">6.2. Web Application Dedicated Handler</a> &raquo;</li>
      
    <li>6.2.5. Internal Forward Handler</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/index.html" class="ja">日本語</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="internal-forward-handler">
<span id="forwarding-handler"></span><h1>6.2.5. Internal Forward Handler<a class="headerlink" href="#internal-forward-handler" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#handler-class-name" id="id2">Handler class name</a></li>
<li><a class="reference internal" href="#module-list" id="id3">Module list</a></li>
<li><a class="reference internal" href="#constraints" id="id4">Constraints</a></li>
<li><a class="reference internal" href="#returns-the-response-that-indicates-internal-forward" id="id5">Returns the response that indicates internal forward</a></li>
<li><a class="reference internal" href="#rules-for-the-paths-specified-for-internal-forwards" id="id6">Rules for the paths specified for internal forwards</a></li>
<li><a class="reference internal" href="#internal-request-id" id="id7">Internal Request ID</a></li>
</ul>
</div>
<p>This handler re-executes the subsequent handler with the specified request path when the content in the response from the subsequent handler indicates an internal forward.</p>
<p>Internal forward is used when the transition destination screen is not a simple screen display and options such as check boxes and drop-down lists are acquired from the server.
For example, the input screen is not only redisplayed when an error occurs during input check, but also options for the input item is acquired from the server. For details, see <a class="reference internal" href="../web_interceptor/on_error.html#on-error-forward"><span>Acquire the data to be displayed on the transition destination screen when an error occurs</span></a>.</p>
<p>This handler performs the following processes.</p>
<ul class="simple">
<li>Re-execution of subsequent handler during internal forward</li>
</ul>
<p>The process flow is as follows.</p>
<img alt="../../../../_images/flow29.png" src="../../../../_images/flow29.png" />
<div class="section" id="handler-class-name">
<h2><a class="toc-backref" href="#id2">6.2.5.1. Handler class name</a><a class="headerlink" href="#handler-class-name" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://nablarch.github.io/docs/6u1/javadoc/nablarch/fw/web/handler/ForwardingHandler.html" title="nablarch.fw.web.handler.ForwardingHandler">nablarch.fw.web.handler.ForwardingHandler</a></li>
</ul>
</div>
<div class="section" id="module-list">
<h2><a class="toc-backref" href="#id3">6.2.5.2. Module list</a><a class="headerlink" href="#module-list" title="Permalink to this headline">¶</a></h2>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.nablarch.framework<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>nablarch-fw-web<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="constraints">
<h2><a class="toc-backref" href="#id4">6.2.5.3. Constraints</a><a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Place this handler after the <a class="reference internal" href="SessionStoreHandler.html#session-store-handler"><span>Session Variable Store Handler</span></a></dt>
<dd>See <a class="reference internal" href="SessionStoreHandler.html#session-store-handler-error-forward-path"><span>Configure the transition destination during tampering error</span></a> for
why it should be placed after <a class="reference internal" href="SessionStoreHandler.html#session-store-handler"><span>Session Variable Store Handler</span></a></dd>
</dl>
</div>
<div class="section" id="returns-the-response-that-indicates-internal-forward">
<h2><a class="toc-backref" href="#id5">6.2.5.4. Returns the response that indicates internal forward</a><a class="headerlink" href="#returns-the-response-that-indicates-internal-forward" title="Permalink to this headline">¶</a></h2>
<p>When a response indicating an internal forward in a business action is returned,
start the content path indicated by the response with <code class="docutils literal"><span class="pre">forward://</span></code>.</p>
<p>An example is shown below.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">HttpResponse</span> <span class="nf">sample</span><span class="o">(</span><span class="n">HttpRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// Business process</span>

  <span class="c1">// Internal forward to initialize the same business action</span>
  <span class="k">return</span> <span class="k">new</span> <span class="n">HttpResponse</span><span class="o">(</span><span class="s">&quot;forward://initialize&quot;</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>For the status code, compare the during and after forward codes, and use the larger value as the response status code.</p>
<p>An example is shown below.</p>
<ul class="last simple">
<li>If during forward is <strong>200</strong> and after forward is <strong>500</strong>, returns <strong>500</strong> to client.</li>
<li>If during forward is <strong>400</strong> and after forward is <strong>200</strong>, returns <strong>400</strong> to client.</li>
</ul>
</div>
</div>
<div class="section" id="rules-for-the-paths-specified-for-internal-forwards">
<h2><a class="toc-backref" href="#id6">6.2.5.5. Rules for the paths specified for internal forwards</a><a class="headerlink" href="#rules-for-the-paths-specified-for-internal-forwards" title="Permalink to this headline">¶</a></h2>
<p>Relative and absolute paths can be specified for the forward destination path specified by the internal forward.</p>
<dl class="docutils">
<dt>Relative path</dt>
<dd>Path starting from the current request URI.</dd>
<dt>Absolute path</dt>
<dd><p class="first">Path starting from the servlet context name.</p>
<p class="last">For absolute paths, start the path to be specified with <code class="docutils literal"><span class="pre">/</span></code>.</p>
</dd>
</dl>
<p>An example is shown below.</p>
<p>If the current request URI is <code class="docutils literal"><span class="pre">action/users/save</span></code>, the internal forward destination indicated by the relative and absolute paths below is the same.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Relative path</span>
<span class="k">new</span> <span class="n">HttpResponse</span><span class="o">(</span><span class="s">&quot;forward://initialize&quot;</span><span class="o">);</span>

<span class="c1">// Absolute path</span>
<span class="k">new</span> <span class="n">HttpResponse</span><span class="o">(</span><span class="s">&quot;forward:///action/users/initialize&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="internal-request-id">
<span id="id1"></span><h2><a class="toc-backref" href="#id7">6.2.5.6. Internal Request ID</a><a class="headerlink" href="#internal-request-id" title="Permalink to this headline">¶</a></h2>
<p>The request ID of the forwarding destination is retained in the thread context as an internal request ID during internal forwarding.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2024, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'6u1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../../_static/custom.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>