


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Nablarch OpenAPI Generator &mdash; ∇Nablarch  6u3 ドキュメント</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/development_tools/toolbox/NablarchOpenApiGenerator/NablarchOpenApiGenerator.html" />
  
    <link rel="top" title="∇Nablarch  6u3 ドキュメント" href="../../../index.html"/>
        <link rel="up" title="アプリケーション開発時に使える便利なツール" href="../index.html"/>
        <link rel="next" title="Example" href="../../../examples/index.html"/>
        <link rel="prev" title="Nablarch SQL Executor" href="../SqlExecutor/SqlExecutor.html"/>

<script defer data-domain="nablarch.github.io,all.fintan" src=https://plausible.io/js/script.js></script>


  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 6u3</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../about_nablarch/index.html">Nablarchについて</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/concept.html">Nablarchのコンセプト</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/mvn_module.html">Nablarch のモジュール一覧</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/license.html">Nablarchのライセンスについて</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../application_framework/index.html">Nablarchアプリケーションフレームワーク</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../application_framework/application_framework/index.html">アプリケーションフレームワーク</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/nablarch/index.html">Nablarchアプリケーションフレームワークとは</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/web/index.html">ウェブアプリケーション編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/web_service/index.html">ウェブサービス編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/batch/index.html">バッチアプリケーション編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/messaging/index.html">メッセージング編</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/handlers/index.html">Nablarchの提供する標準ハンドラ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/libraries/index.html">Nablarchが提供するライブラリ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/blank_project/index.html">ブランクプロジェクト</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/setting_guide/index.html">Nablarchアプリケーションフレームワーク設定ガイド</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/configuration/index.html">デフォルト設定一覧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/application_framework/cloud_native/index.html">Nablarchクラウドネイティブ対応</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../application_framework/adaptors/index.html">アダプタ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/log_adaptor.html">logアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/router_adaptor.html">ルーティングアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/webspheremq_adaptor.html">IBM MQアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/jaxrs_adaptor.html">Jakarta RESTful Web Servicesアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/doma_adaptor.html">Domaアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/jsr310_adaptor.html">JSR310(Date and Time API)アダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarkerアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleafアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/mail_sender_velocity_adaptor.html">E-mail Velocityアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/web_thymeleaf_adaptor.html">ウェブアプリケーション Thymeleafアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/lettuce_adaptor.html">Lettuceアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/slf4j_adaptor.html">SLF4Jアダプタ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../application_framework/adaptors/micrometer_adaptor.html">Micrometerアダプタ</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Nablarch開発ツール</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../java_static_analysis/index.html">効率的なJava静的チェック</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../java_static_analysis/index.html#inspection">Inspectionを行う</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../java_static_analysis/index.html#code-format">フォーマットを統一する</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../java_static_analysis/index.html#api">許可していないAPIが使用されていないかチェックする</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../testing_framework/index.html">テスティングフレームワーク</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../testing_framework/guide/development_guide/05_UnitTestGuide/index.html">単体テスト実施方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../testing_framework/guide/development_guide/06_TestFWGuide/index.html">自動テストフレームワークの使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../testing_framework/guide/development_guide/08_TestTools/index.html">プログラミング工程で使用するツール</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">アプリケーション開発時に使える便利なツール</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../JspStaticAnalysis/index.html">Jakarta Server Pages静的解析ツール</a></li>
<li class="toctree-l3"><a class="reference internal" href="../SqlExecutor/SqlExecutor.html">Nablarch SQL Executor</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Nablarch OpenAPI Generator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/index.html#id1">Exampleの実行方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/index.html#id2">環境構築手順</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/index.html#id3">実行手順</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/index.html#java-21">Java 21 で動かす場合</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../examples/index.html#id4">Exampleの一覧</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/index.html#id5">ウェブアプリケーション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/index.html#id6">ウェブサービス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/index.html#id8">バッチアプリケーション</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../examples/index.html#id9">メッセージング</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../biz_samples/index.html">目的別の実装サンプル集</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/01/index.html">データベースを用いたパスワード認証機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/01/0101_PBKDF2PasswordEncryptor.html">PBKDF2を用いたパスワード暗号化機能サンプル</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/01/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/01/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/01/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/01/index.html#id12">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/03/index.html">検索結果の一覧表示</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#id3">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#id4">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#id5">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#universaldao">UniversalDaoクラス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#listsearchinfo">ListSearchInfoクラス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#pagination">Paginationクラス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#entitylist">EntityListクラス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#listsearchresult">listSearchResultタグ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#listsearchresult-customize">業務アプリケーションへのサンプル実装(タグファイル)の取り込み方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/03/index.html#listsearchresult-tagreference">タグリファレンス</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/04/index.html">フォーマッタ機能の拡張</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/04/0401_ExtendedDataFormatter.html">データフォーマッタの拡張</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/04/0402_ExtendedFieldType.html">データフォーマッタ機能におけるフィールドタイプの拡張</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/05/index.html">データベースを用いたファイル管理機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/05/index.html#id2">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/05/index.html#id6">機能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/05/index.html#id9">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/05/index.html#id14">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/08/index.html">HTMLメール送信機能サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/08/index.html#id1">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/08/index.html#id3">要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/08/index.html#id6">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/08/index.html#id14">実装例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/09/index.html">bouncycastleを使用した電子署名つきメールの送信サンプルの使用方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/09/index.html#id3">環境準備</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/09/index.html#id4">電子署名付きメール送信機能の構造</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/09/index.html#id5">設定ファイルの準備</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/09/index.html#id7">実行方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/10/index.html">ログ集計サンプルの使用方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/10/index.html#id3">提供サンプル一覧</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/11/index.html">メッセージング基盤テストシミュレータサンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/11/index.html#id4">用途</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/11/index.html#id8">特徴</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/11/index.html#id12">要求</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/11/index.html#id15">使用方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/11/index.html#id18">拡張例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/12/index.html">OIDCのIDトークンを用いた認証サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/12/index.html#id1">提供パッケージ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/12/index.html#id3">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/12/index.html#id5">構成</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/12/index.html#id11">使用方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../biz_samples/13/index.html">Logbookを用いたリクエスト/レスポンスログ出力サンプル</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/13/index.html#id2">概要</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../biz_samples/13/index.html#id5">使用方法</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../external_contents/index.html">Nablarchでの開発に役立つコンテンツ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../external_contents/index.html#system-development-guide">Nablarchシステム開発ガイド</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../external_contents/index.html#development-standards">開発標準</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../nablarch_api/index.html">Nablarch API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/index.html">リリース情報</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about_nablarch/versionup_policy.html">Nablarch のバージョンアップ方針</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/versionup_policy.html#versionup-policy-release-type">リリース単位</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/versionup_policy.html#versionup-policy-versionup-type">バージョンアップの種類</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/versionup_policy.html#versionup-policy-product-version-number">バージョンの番号体系</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about_nablarch/versionup_policy.html#versionup-policy-backward-compatibility-policy">後方互換性ポリシー</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/versionup_policy.html#id8">後方互換性を維持する範囲</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/versionup_policy.html#versionup-policy-backward-compatibility-contents">後方互換性維持の内容</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about_nablarch/versionup_policy.html#versionup-policy-backward-compatibility-is-not-maintained">後方互換性の例外</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../inquiry/index.html">機能追加要望・改善要望</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../inquiry/index.html#id2">JIRAへの課題起票方法</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../migration/index.html">Nablarch 5から6への移行ガイド</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../migration/index.html#id2">Nablarch 5と6で大きく異なる点</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../migration/index.html#jakarta-ee-10">Jakarta EE 10に対応</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../migration/index.html#java17">動作に必要なJavaの最低バージョンを17に変更</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../migration/index.html#id3">前提条件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../migration/index.html#id5">移行手順の概要</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../migration/index.html#id6">移行手順の詳細</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../migration/index.html#nablarch">Nablarchのバージョンアップ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../migration/index.html#jakarta-ee">Jakarta EE対応</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../migration/index.html#jsr352">JSR352に準拠したバッチアプリケーションの移行手順</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../migration/index.html#id12">実行時にエラーになる場合の対処方法</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../migration/index.html#id13">付録</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../migration/index.html#java-ee-jakarta-ee-comparation">Java EEとJakarta EEの仕様の対応表</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../jakarta_ee/index.html">Jakarta EEの仕様名に関して</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../jakarta_ee/index.html#id2">省略名の表記に関して</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../jakarta_ee/index.html#nablarch56">Nablarch5と6で名称が変更になった機能について</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../terms_of_use/index.html">ご利用にあたって</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../terms_of_use/index.html#id2">情報の外部送信について</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../terms_of_use/index.html#id3">情報の利用目的</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../terms_of_use/index.html#id4">情報の送信先</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../terms_of_use/index.html#id5">情報の種類・用途</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Nablarch開発ツール</a> &raquo;</li>
      
          <li><a href="../index.html">アプリケーション開発時に使える便利なツール</a> &raquo;</li>
      
    <li>Nablarch OpenAPI Generator</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/en/index.html" class="en">English</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nablarch-openapi-generator">
<span id="id1"></span><h1>Nablarch OpenAPI Generator<a class="headerlink" href="#nablarch-openapi-generator" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="contents local topic" id="id2">
<p class="topic-title first">目次</p>
<ul class="simple">
<li><a class="reference internal" href="#id3" id="id28">ツールの概要</a></li>
<li><a class="reference internal" href="#id4" id="id29">前提条件</a></li>
<li><a class="reference internal" href="#id5" id="id30">動作概要</a></li>
<li><a class="reference internal" href="#id6" id="id31">運用方法</a></li>
<li><a class="reference internal" href="#id7" id="id32">使用方法</a><ul>
<li><a class="reference internal" href="#maven" id="id33">Mavenプラグインの設定</a></li>
<li><a class="reference internal" href="#id8" id="id34">実行方法</a></li>
<li><a class="reference internal" href="#id9" id="id35">出力先</a></li>
<li><a class="reference internal" href="#generator" id="id36">Generatorの設定項目</a></li>
<li><a class="reference internal" href="#bean-validation" id="id37">Bean Validationを使用するソースコードを生成する</a></li>
<li><a class="reference internal" href="#cli" id="id38">CLIとして実行する</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10" id="id39">ソースコード生成仕様</a><ul>
<li><a class="reference internal" href="#id11" id="id40">リソース(アクション)インターフェース生成仕様</a></li>
<li><a class="reference internal" href="#id12" id="id41">モデル生成仕様</a></li>
<li><a class="reference internal" href="#id13" id="id42">生成されるソースコードが依存するモジュール</a></li>
<li><a class="reference internal" href="#openapijava" id="id43">OpenAPIドキュメントのデータ型およびフォーマットとJavaのデータ型の対応仕様</a></li>
<li><a class="reference internal" href="#openapibean-validation" id="id44">OpenAPIドキュメントのバリデーション定義とBean Validationの対応仕様</a><ul>
<li><a class="reference internal" href="#id14" id="id45">OpenAPI仕様にて規定されているプロパティに対応するバリデーション</a></li>
<li><a class="reference internal" href="#id16" id="id46">ドメインバリデーション</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id18" id="id47">バリデーションに関する運用上の注意点</a><ul>
<li><a class="reference internal" href="#id19" id="id48">OpenAPI仕様の規定範囲では項目単位や相関バリデーションの要求を満たせない場合の注意点</a></li>
<li><a class="reference internal" href="#id20" id="id49">ドメインバリデーションを使用する場合の注意点</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id21" id="id50">OpenAPIドキュメントと生成されるソースコードの例</a><ul>
<li><a class="reference internal" href="#id22" id="id51">OpenAPIドキュメントのパスおよびオペレーションの定義とソースコードの生成例</a></li>
<li><a class="reference internal" href="#id23" id="id52">OpenAPIドキュメントのスキーマの定義とソースコードの生成例</a></li>
<li><a class="reference internal" href="#id24" id="id53">Bean Validationを使用するソースコードの生成例</a></li>
<li><a class="reference internal" href="#id25" id="id54">ドメインバリデーションを使用するソースコードの生成例</a></li>
<li><a class="reference internal" href="#id26" id="id55">ファイルアップロードの定義例</a></li>
<li><a class="reference internal" href="#id27" id="id56">ファイルダウンロードの定義例</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id28">ツールの概要</a><a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Nablarch OpenAPI Generatorは、 <a class="reference external" href="https://www.openapis.org/">OpenAPI(外部サイト、英語)</a> ドキュメントからソースコードを生成する  <a class="reference external" href="https://openapi-generator.tech/">OpenAPI Generator(外部サイト、英語)</a> のGenerator実装である。</p>
<p>本ツールはNablarch RESTfulウェブサービス用のGeneratorを提供しており、 <a class="reference external" href="https://openapi-generator.tech/docs/plugins">OpenAPI GeneratorのMavenプラグイン(外部サイト、英語)</a> に組み込み実行することでソースコードを生成する。</p>
<p>生成されたソースコードを使用することで、OpenAPIドキュメントで定義したREST APIのインターフェースに従ったアクションクラスの実装が容易となる。</p>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id29">前提条件</a><a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>Nablarch RESTfulウェブサービスのソースコード生成元となるOpenAPIドキュメントが作成されていること</li>
<li>OpenAPIドキュメントは <a class="reference external" href="https://spec.openapis.org/oas/v3.0.3.html">OpenAPI 3.0.3(外部サイト、英語)</a> 仕様で記述されていること</li>
</ul>
</div>
<div class="section" id="id5">
<h2><a class="toc-backref" href="#id30">動作概要</a><a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>本ツールではソースコード生成元となるOpenAPIドキュメントを入力として指定することで、OpenAPIドキュメントから以下のソースコードを生成する。</p>
<ul class="simple">
<li>パスおよびオペレーション定義を元にした、リソース(アクション)インターフェース</li>
<li>スキーマ定義を元にした、リクエスト、レスポンスに対応するモデル</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">OpenAPI Generatorの仕様上 <code class="docutils literal"><span class="pre">.openapi-generator-ignore</span></code> 、 <code class="docutils literal"><span class="pre">.openapi-generator/FILES</span></code> 、 <code class="docutils literal"><span class="pre">.openapi-generator/VERSION</span></code> が <a class="reference internal" href="#nablarchopenapigeneratorconfiguration"><span>Generatorの設定項目</span></a> の <code class="docutils literal"><span class="pre">output</span></code> で指定したディレクトリ配下に生成されるが、これらは使用しない。</p>
</div>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id31">運用方法</a><a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>本ツールは以下の運用方法を想定している。</p>
<ol class="arabic simple">
<li>ウェブサービスの設計情報を元にOpenAPIドキュメントを作成する</li>
<li>Nablarch RESTfulウェブサービスのプロジェクトを作成し、MavenプラグインとしてOpenAPI Generatorおよび本ツールの設定を行う</li>
<li>プロジェクトをビルドし、リソース(アクション)インターフェースとモデルを生成する</li>
<li>生成したリソース(アクション)インターフェースとモデルを使用して、Nablarch RESTfulウェブサービスの実装を行う</li>
</ol>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">本ツールはOpenAPIドキュメントの修正に合わせて繰り返し実行されることを想定している。Nablarch RESTfulウェブサービスのアクションクラスは生成されたリソース(アクション)インターフェースを実装して作成するため、本ツールによる自動生成を再度行ってもアクションクラスに実装した内容が失われることはない。</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">OpenAPI Generatorおよび本ツールはMavenプラグインとしての実行形態を想定しているが、CLIでも使用可能である。詳しくは <a class="reference internal" href="#nablarchopenapigeneratorascli"><span>CLIとして実行する</span></a> を参照すること。</p>
</div>
</div>
<div class="section" id="id7">
<h2><a class="toc-backref" href="#id32">使用方法</a><a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="maven">
<h3><a class="toc-backref" href="#id33">Mavenプラグインの設定</a><a class="headerlink" href="#maven" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>本ツールを使用するために最低限必要な、OpenAPI GeneratorのMavenプラグインの設定例を以下に示す。</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.openapitools<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>openapi-generator-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>7.10.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    <span class="c">&lt;!-- 本ツールのモジュールを依存関係に追加 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>com.nablarch.tool<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>nablarch-openapi-generator<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
  <span class="nt">&lt;executions&gt;</span>
    <span class="nt">&lt;execution&gt;</span>
      <span class="nt">&lt;goals&gt;</span>
        <span class="nt">&lt;goal&gt;</span>generate<span class="nt">&lt;/goal&gt;</span>
      <span class="nt">&lt;/goals&gt;</span>
      <span class="nt">&lt;configuration&gt;</span>
        <span class="c">&lt;!-- OpenAPIドキュメントのファイルパスを指定する --&gt;</span>
        <span class="nt">&lt;inputSpec&gt;</span>${project.basedir}/src/main/resources/openapi.yaml<span class="nt">&lt;/inputSpec&gt;</span>
        <span class="nt">&lt;generatorName&gt;</span>nablarch-jaxrs<span class="nt">&lt;/generatorName&gt;</span>
        <span class="nt">&lt;configOptions&gt;</span>
          <span class="nt">&lt;sourceFolder&gt;</span>src/gen/java<span class="nt">&lt;/sourceFolder&gt;</span>
          <span class="nt">&lt;apiPackage&gt;</span>com.example.api<span class="nt">&lt;/apiPackage&gt;</span>
          <span class="nt">&lt;modelPackage&gt;</span>com.example.model<span class="nt">&lt;/modelPackage&gt;</span>

          <span class="c">&lt;!-- その他、本ツールのオプションを指定する --&gt;</span>
        <span class="nt">&lt;/configOptions&gt;</span>
      <span class="nt">&lt;/configuration&gt;</span>
    <span class="nt">&lt;/execution&gt;</span>
  <span class="nt">&lt;/executions&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</pre></div>
</div>
<p>本ツールは以下の依存関係により提供される。</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.nablarch.tool<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>nablarch-openapi-generator<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>OpenAPI GeneratorのMavenプラグインを使用するにあたり、最低限必要な設定はソースコードの生成対象となるOpenAPIドキュメントを指定する <code class="docutils literal"><span class="pre">inputSpec</span></code> と、どのGeneratorを使用するかを指定する <code class="docutils literal"><span class="pre">generatorName</span></code> の2つである。</p>
<p><code class="docutils literal"><span class="pre">generatorName</span></code> には <code class="docutils literal"><span class="pre">nablarch-jaxrs</span></code> を指定することで、本ツールを利用できる。</p>
<p>その他の設定項目については <a class="reference internal" href="#nablarchopenapigeneratorconfiguration"><span>Generatorの設定項目</span></a> を参照すること。</p>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">本ツールはOpenAPI Generator 7.10.0を使用して開発、テストをしている。
OpenAPI Generatorのバージョンを変更する場合は、プロジェクト側でテストを行い問題ないことを確認すること。</p>
</div>
</div>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id34">実行方法</a><a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>本ツールはMavenのcompileゴールで実行できる。</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>mvn compile
</pre></div>
</div>
<p>なお <a class="reference internal" href="#nablarchopenapigeneratorconfiguration"><span>Generatorの設定項目</span></a> の <code class="docutils literal"><span class="pre">sourceFolder</span></code> を明示的に設定した場合、 <code class="docutils literal"><span class="pre">mvn</span> <span class="pre">compile</span></code> 時に生成されたソースコードをMavenプラグインを設定したプロジェクトのコンパイル対象に含めるようになる。</p>
<p>この動作はOpenAPI GeneratorのMavenプラグインによって行われる。</p>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id35">出力先</a><a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenAPI GeneratorのMavenプラグインのデフォルト設定では、生成されたソースコードは <code class="docutils literal"><span class="pre">target/generated-sources/openapi/src/gen/java</span></code> に出力される。</p>
<p>出力先を変更したい場合は <a class="reference internal" href="#nablarchopenapigeneratorconfiguration"><span>Generatorの設定項目</span></a> の <code class="docutils literal"><span class="pre">output</span></code> と <code class="docutils literal"><span class="pre">sourceFolder</span></code> を参照すること。</p>
</div>
<div class="section" id="generator">
<span id="nablarchopenapigeneratorconfiguration"></span><h3><a class="toc-backref" href="#id36">Generatorの設定項目</a><a class="headerlink" href="#generator" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenAPI GeneratorのMavenプラグインの主要な設定項目を以下に示す。これらは <code class="docutils literal"><span class="pre">configuration</span></code> タグ内直下のタグとして指定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="49%" />
<col width="9%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項目名</th>
<th class="head">設定内容</th>
<th class="head">必須/任意</th>
<th class="head">デフォルト値</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">inputSpec</span></code></td>
<td>入力となるOpenAPIドキュメントのファイルパスを指定する。</td>
<td>必須</td>
<td>なし</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">generatorName</span></code></td>
<td>ソースコードを生成するGeneratorの名前を指定する。 <br />
本ツールでは <code class="docutils literal"><span class="pre">nablarch-jarxrs</span></code> と指定すること。</td>
<td>必須</td>
<td>なし</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">output</span></code></td>
<td>ソースコードの生成先ディレクトリを指定する。</td>
<td>任意</td>
<td><code class="docutils literal"><span class="pre">generated-sources/openapi</span></code></td>
</tr>
</tbody>
</table>
<p>本ツールの設定項目を以下に示す。すべて任意項目であり、これらは <code class="docutils literal"><span class="pre">configOptions</span></code> タグ内に指定する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="50%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">項目名</th>
<th class="head">設定内容</th>
<th class="head">デフォルト値</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">apiPackage</span></code></td>
<td>生成するリソース(アクション)インターフェースのパッケージを <br />
指定する。</td>
<td><code class="docutils literal"><span class="pre">org.openapitools.api</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">modelPackage</span></code></td>
<td>生成するモデルのパッケージを指定する。</td>
<td><code class="docutils literal"><span class="pre">org.openapitools.model</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">hideGenerationTimestamp</span></code></td>
<td><code class="docutils literal"><span class="pre">Generated</span></code> アノテーションを注釈する時に <code class="docutils literal"><span class="pre">date</span></code> 属性を <br />
付与するか否か。デフォルトではソースコードを生成した日時が <br />
出力される。</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">sourceFolder</span></code></td>
<td>ソースコードの生成先ディレクトリを指定する。  <br />
OpenAPI GeneratorのMavenプラグイン設定の <code class="docutils literal"><span class="pre">output</span></code> からの <br />
相対パスとして解釈される。 <br />
この項目を指定すると、本ツールにより生成したソースコードが <br />
<code class="docutils literal"><span class="pre">mvn</span> <span class="pre">compile</span></code> 時のコンパイル対象に含まれるようになる。</td>
<td><code class="docutils literal"><span class="pre">src/gen/java</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">useTags</span></code></td>
<td>生成するリソース(アクション)インターフェースの単位を <br />
パスではなくエンドポイントに付与されているタグの単位とする。 <br />
なお、エンドポイントに複数のタグが付与されている場合は最初の <br />
タグが有効となる。</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">serializableModel</span></code></td>
<td>生成するモデルに <code class="docutils literal"><span class="pre">java.io.Serializable</span></code> <br />
インターフェースを実装する。</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">generateBuilders</span></code></td>
<td>モデルに対するビルダークラスを生成する。</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">useBeanValidation</span></code></td>
<td>OpenAPIドキュメントのバリデーション定義から、<br />
<a class="reference internal" href="../../../application_framework/application_framework/libraries/validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a> の機能を使った <br />
バリデーションを行うようにソースコードを生成する。</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">additionalModelTypeAnnotations</span></code></td>
<td>生成するモデルのクラス宣言に追加のアノテーションを注釈する。 <br />
複数のアノテーションを追加する場合は <code class="docutils literal"><span class="pre">;</span></code> 区切りで指定する。</td>
<td>なし</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">additionalEnumTypeAnnotations</span></code></td>
<td>生成するenum型に追加のアノテーションを注釈する。 <br />
複数のアノテーションを追加する場合は <code class="docutils literal"><span class="pre">;</span></code> 区切りで指定する。</td>
<td>なし</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">primitivePropertiesAsString</span></code></td>
<td>モデルのプリミティブなデータ型のプロパティをすべて <br />
<code class="docutils literal"><span class="pre">String</span></code> として出力する。</td>
<td><code class="docutils literal"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">supportConsumesMediaTypes</span></code></td>
<td>生成するリソース(アクション)インターフェースがリクエストを <br />
受け付けるメディアタイプを <code class="docutils literal"><span class="pre">,</span></code> 区切りで指定する。</td>
<td><code class="docutils literal"><span class="pre">application/json,multipart/form-data</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">supportProducesMediaTypes</span></code></td>
<td>生成するリソース(アクション)インターフェースがレスポンス <br />
とするメディアタイプを <code class="docutils literal"><span class="pre">,</span></code> 区切りで指定する。</td>
<td><code class="docutils literal"><span class="pre">application/json</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="bean-validation">
<h3><a class="toc-backref" href="#id37">Bean Validationを使用するソースコードを生成する</a><a class="headerlink" href="#bean-validation" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../../../application_framework/application_framework/libraries/validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a> を使用するようにソースコードを生成する場合は、 <code class="docutils literal"><span class="pre">useBeanValidation</span></code> の値を <code class="docutils literal"><span class="pre">true</span></code> に設定する。</p>
<p>以下に設定例を示す。</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;configuration&gt;</span>
  <span class="c">&lt;!-- OpenAPIドキュメントのファイルパスを指定する --&gt;</span>
  <span class="nt">&lt;inputSpec&gt;</span>${project.basedir}/src/main/resources/openapi.yaml<span class="nt">&lt;/inputSpec&gt;</span>
  <span class="nt">&lt;generatorName&gt;</span>nablarch-jaxrs<span class="nt">&lt;/generatorName&gt;</span>
  <span class="nt">&lt;configOptions&gt;</span>
    <span class="nt">&lt;sourceFolder&gt;</span>src/gen/java<span class="nt">&lt;/sourceFolder&gt;</span>
    <span class="nt">&lt;apiPackage&gt;</span>com.example.api<span class="nt">&lt;/apiPackage&gt;</span>
    <span class="nt">&lt;modelPackage&gt;</span>com.example.model<span class="nt">&lt;/modelPackage&gt;</span>

    <span class="c">&lt;!-- Bean Validationを使用するソースコードを生成する --&gt;</span>
    <span class="nt">&lt;useBeanValidation&gt;</span>true<span class="nt">&lt;/useBeanValidation&gt;</span>
  <span class="nt">&lt;/configOptions&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">useBeanValidation</span></code> のデフォルト値は <code class="docutils literal"><span class="pre">false</span></code> のため、デフォルトでは <a class="reference internal" href="../../../application_framework/application_framework/libraries/validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a> の機能を使用するアノテーションは注釈されない。</p>
<p>これは、OpenAPI仕様にて規定されてるバリデーション定義では業務要件を満たせないことが多いと考えられ、また相関バリデーションの定義も行えないためである。</p>
<p>このような観点も含め、バリデーション機能を使用するようにソースコード生成する場合の仕様や運用上の注意点は <a class="reference internal" href="#openapi-property-to-bean-validation"><span>OpenAPIドキュメントのバリデーション定義とBean Validationの対応仕様</span></a> に詳細に記載しているので参照すること。</p>
</div>
<div class="section" id="cli">
<span id="nablarchopenapigeneratorascli"></span><h3><a class="toc-backref" href="#id38">CLIとして実行する</a><a class="headerlink" href="#cli" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>本ツールは主にMavenプラグインとして使用することを想定しているが、CLIとしても使用可能である。ここでは補足としてCLIでの実行方法を紹介する。</p>
<p>CLIとして実行するには、 <a class="reference external" href="https://repo1.maven.org/maven2/org/openapitools/openapi-generator-cli/7.10.0/openapi-generator-cli-7.10.0.jar">OpenAPI Generator 7.10.0のJARファイル(外部サイト)</a> および <a class="reference external" href="https://repo1.maven.org/maven2/com/nablarch/tool/nablarch-openapi-generator/1.0.0/nablarch-openapi-generator-1.0.0.jar">本ツールのJARファイル(外部サイト)</a> をダウンロードしてjavaコマンドで実行する。実行例を以下に示す。</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -cp openapi-generator-cli-7.10.0.jar:nablarch-openapi-generator-1.0.0.jar org.openapitools.codegen.OpenAPIGenerator generate --generator-name nablarch-jaxrs --input-spec openapi.yaml --output out --additional-properties=apiPackage=com.example.api,modelPackage=com.example.model,useBeanValidation=true,hideGenerationTimestamp=true
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">--generator-name</span></code> には <code class="docutils literal"><span class="pre">nablarch-jaxrs</span></code> を指定する。 <a class="reference internal" href="#nablarchopenapigeneratorconfiguration"><span>Generatorの設定項目</span></a> のうちOpenAPI Generatorの設定項目はOpenAPI GeneratorのCLIでも指定できる。詳しくは以下のコマンドの結果を参照。</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar openapi-generator-cli-7.10.0.jar help generate
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">OpenAPI Generatorの設定項目は、 <code class="docutils literal"><span class="pre">--generator-name</span></code> のようにハイフン区切りの形式になる。</p>
</div>
<p><a class="reference internal" href="#nablarchopenapigeneratorconfiguration"><span>Generatorの設定項目</span></a> のうち本ツール固有の設定項目については、 <code class="docutils literal"><span class="pre">--additional-properties</span></code> に <code class="docutils literal"><span class="pre">key=value</span></code> の形式で指定する。複数指定する場合は <code class="docutils literal"><span class="pre">,</span></code> 区切りでの指定となる。</p>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">本ツール固有の設定項目は、 <code class="docutils literal"><span class="pre">--additional-properties=hideGenerationTimestamp=true</span></code> のように <code class="docutils literal"><span class="pre">--additional-properties=</span></code> に続けて項目名をそのまま指定する。</p>
</div>
</div>
</div>
<div class="section" id="id10">
<h2><a class="toc-backref" href="#id39">ソースコード生成仕様</a><a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以降では、本ツールがOpenAPIドキュメントを元にソースコードを生成する仕様について記載する。</p>
<div class="admonition important">
<p class="first admonition-title">重要</p>
<p>Nablarch RESTfulウェブサービスはJakarta RESTful Web Servicesが提供するすべてのアノテーションをサポートしているわけではないため、ここで記載する内容以外のOpenAPIドキュメントの内容は生成されるソースコードに反映されないことに注意すること。</p>
<p class="last">Nablarch RESTfulウェブサービスがサポートしているアノテーションについては <a class="reference internal" href="../../../application_framework/application_framework/web_service/rest/architecture.html#restful-web-service-architecture"><span>アーキテクチャ概要</span></a> および、ルーティングアダプタの <a class="reference internal" href="../../../application_framework/adaptors/router_adaptor.html#router-adaptor-path-annotation"><span>Jakarta RESTful Web ServicesのPathアノテーションでマッピングする</span></a> を参照すること。</p>
</div>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id40">リソース(アクション)インターフェース生成仕様</a><a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ここではリソース(アクション)インターフェースの生成仕様を記載する。 <a class="reference internal" href="../../../application_framework/application_framework/web_service/rest/feature_details/resource_signature.html#rest-feature-details-method-signature"><span>リソースクラスのメソッドのシグネチャ</span></a> に則った形で生成するのでこちらも参照すること。</p>
<p>リソース(アクション)インターフェースの生成単位や型定義に関する仕様を以下に示す。</p>
<ul class="simple">
<li>OpenAPIドキュメントに定義されたパスおよびオペレーションの情報を元に生成する。</li>
<li>Javaのインターフェースとして生成する。</li>
<li>リソース(アクション)インターフェースの生成単位は、以下から選択する。<ul>
<li>デフォルトではOpenAPIドキュメントのパスの第一階層でまとめられたものとなる。</li>
<li><code class="docutils literal"><span class="pre">useTags</span></code> を <code class="docutils literal"><span class="pre">true</span></code> にした場合はオペレーションに付与されているタグの単位となる。</li>
</ul>
</li>
<li>リソース(アクション)インターフェースの宣言には <code class="docutils literal"><span class="pre">Path</span></code> アノテーションを注釈する。</li>
<li><code class="docutils literal"><span class="pre">Generated</span></code> アノテーションを注釈する。</li>
</ul>
<p>リソース(アクション)インターフェースのメソッド生成に関する仕様を以下に示す。</p>
<p><strong>メソッド宣言に注釈するアノテーション</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">アノテーション</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">GET</span></code></td>
<td>オペレーションのHTTPメソッドがGETの場合に注釈する。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">POST</span></code></td>
<td>オペレーションのHTTPメソッドがPOSTの場合に注釈する。</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">PUT</span></code></td>
<td>オペレーションのHTTPメソッドがPUTの場合に注釈する。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">DELETE</span></code></td>
<td>オペレーションのHTTPメソッドがDELETEの場合に注釈する。</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">PATCH</span></code></td>
<td>オペレーションのHTTPメソッドがPATCHの場合に注釈する。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">HEAD</span></code></td>
<td>オペレーションのHTTPメソッドがHEADの場合に注釈する。</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">OPTIONS</span></code></td>
<td>オペレーションのHTTPメソッドがOPTIONSの場合に注釈する。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Consumes</span></code></td>
<td>リクエストのコンテンツタイプがある場合に注釈する。</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Produces</span></code></td>
<td>レスポンスのコンテンツタイプがあり、 <code class="docutils literal"><span class="pre">type:</span> <span class="pre">string</span></code> かつ <code class="docutils literal"><span class="pre">format:</span> <span class="pre">binary</span></code> 以外の場合に注釈する。</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Valid</span></code></td>
<td>リクエストボディがあり、 <code class="docutils literal"><span class="pre">useBeanValidation</span></code>  が <code class="docutils literal"><span class="pre">true</span></code> の場合に注釈する。</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last"><code class="docutils literal"><span class="pre">type:</span> <span class="pre">string</span></code> かつ <code class="docutils literal"><span class="pre">format:</span> <span class="pre">binary</span></code> はファイルダウンロードを意味しており、この場合のコンテンツタイプは <a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/web/HttpResponse.html#setContentType(java.lang.String)" title="nablarch.fw.web.HttpResponse.setContentType(java.lang.String)">HttpResponse#setContentType</a> を使用して設定する。</p>
</div>
<p><strong>メソッド名の生成仕様</strong></p>
<ul class="simple">
<li>OpenAPIドキュメントの <code class="docutils literal"><span class="pre">operationId</span></code> 要素の値をメソッド名として使用する。</li>
<li><code class="docutils literal"><span class="pre">operationId</span></code> 要素が指定されていない場合は、 パスの値とHTTPメソッド名を組み合わせてメソッド名を生成する。</li>
</ul>
<p><strong>メソッド引数の生成仕様</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">メソッド引数の型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>リクエストモデルの型</td>
<td>リクエストボディを受け取り、かつリクエストのコンテンツタイプがマルチパート以外の場合、対応するモデルの型の引数を設定する。</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/jaxrs/JaxRsHttpRequest.html" title="nablarch.fw.jaxrs.JaxRsHttpRequest">JaxRsHttpRequest</a></td>
<td>常に生成し、引数に設定する。</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/ExecutionContext.html" title="nablarch.fw.ExecutionContext">ExecutionContext</a></td>
<td>常に生成し、引数に設定する。</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<ul class="last simple">
<li>RESTfulウェブサービスはJakarta RESTful Web Servicesで規定されている <code class="docutils literal"><span class="pre">PathParam</span></code> や <code class="docutils literal"><span class="pre">QueryParam</span></code> 等には対応していないため、 <code class="docutils literal"><span class="pre">parameters</span></code> の定義はメソッド引数には反映されない。これらの情報は <a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/jaxrs/JaxRsHttpRequest.html" title="nablarch.fw.jaxrs.JaxRsHttpRequest">JaxRsHttpRequest</a> より取得すること。</li>
<li>リクエストのコンテンツタイプが <code class="docutils literal"><span class="pre">multipart/form-data</span></code> の場合は、リクエストモデルの型の引数は生成されない。アップロードされたファイルは <a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/jaxrs/JaxRsHttpRequest.html" title="nablarch.fw.jaxrs.JaxRsHttpRequest">JaxRsHttpRequest</a> より取得すること。</li>
</ul>
</div>
<p><strong>メソッド戻り値の生成仕様</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">メソッド戻り値の型</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/jaxrs/EntityResponse.html" title="nablarch.fw.jaxrs.EntityResponse">EntityResponse</a></td>
<td>レスポンスがモデルの場合に生成する。型パラメータにはモデルの型を反映する。</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/web/HttpResponse.html" title="nablarch.fw.web.HttpResponse">HttpResponse</a></td>
<td>レスポンスがモデルでない場合やHTTPステータスコードが <code class="docutils literal"><span class="pre">200</span></code> 以外の場合に生成する。</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id41">モデル生成仕様</a><a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>モデルの生成単位や型定義に関する仕様を以下に示す。</p>
<ul class="simple">
<li>スキーマとして定義しているモデルに対して生成する。</li>
<li>Javaのクラスとして生成する。</li>
<li><code class="docutils literal"><span class="pre">JsonTypeName</span></code> アノテーションを注釈する。</li>
<li><code class="docutils literal"><span class="pre">Generated</span></code> アノテーションを注釈する。</li>
</ul>
<p>モデルのプロパティに関する生成仕様を以下に示す。</p>
<ul class="simple">
<li>OpenAPIドキュメントのスキーマに定義されたフィールドに対応するプロパティを生成する。</li>
<li>プロパティに対するgetterおよびsetterを生成し、 <code class="docutils literal"><span class="pre">JsonProperty</span></code> アノテーションを注釈する。</li>
<li>プロパティの値を設定してモデル自身の型を返す、メソッドチェインが可能なメソッドを生成する。</li>
<li><code class="docutils literal"><span class="pre">useBeanValidation</span></code> が <code class="docutils literal"><span class="pre">true</span></code> かつOpenAPIドキュメントにバリデーション定義がある場合、 <a class="reference internal" href="../../../application_framework/application_framework/libraries/validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a> を使用したバリデーションを有効にする。</li>
<li>バリデーションで使用するアノテーションは、Nablarchの提供する <a class="reference internal" href="../../../application_framework/application_framework/libraries/validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a> 固有のものとJakarta EE標準の <a class="reference external" href="https://jakarta.ee/specifications/platform/10/apidocs/jakarta/validation/constraints/package-summary.html" title="jakarta.validation.constraints.package-summary">jakarta.validation.constraints</a> パッケージのものを使用する。</li>
</ul>
<p>OpenAPIドキュメントでのデータ型やフォーマットとJavaのデータ型との対応仕様は <a class="reference internal" href="#openapi-datatypes-format-to-java-datatypes"><span>OpenAPIドキュメントのデータ型およびフォーマットとJavaのデータ型の対応仕様</span></a> 、バリデーション定義とバリデーションで使用するアノテーションの対応仕様は <a class="reference internal" href="#openapi-property-to-bean-validation"><span>OpenAPIドキュメントのバリデーション定義とBean Validationの対応仕様</span></a> に記載する。</p>
<p>モデルのその他の生成仕様を以下に示す。</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">hashCode</span></code> 、 <code class="docutils literal"><span class="pre">equals</span></code> 、 <code class="docutils literal"><span class="pre">toString</span></code> メソッドを生成する。</li>
</ul>
</div>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id42">生成されるソースコードが依存するモジュール</a><a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>本ツールで生成されるソースコードをビルドするには、依存関係に以下のモジュールが必要になる。</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.nablarch.framework<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>nablarch-fw-jaxrs<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
   <span class="nt">&lt;groupId&gt;</span>com.nablarch.framework<span class="nt">&lt;/groupId&gt;</span>
   <span class="nt">&lt;artifactId&gt;</span>nablarch-core-validation-ee<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>jakarta.ws.rs<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jakarta.ws.rs-api<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>jakarta.annotation<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jakarta.annotation-api<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jackson-annotations<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.17.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>RESTfulウェブサービスのブランクプロジェクトに設定されている依存関係にはこれらはすべて含まれている。</p>
</div>
<div class="section" id="openapijava">
<span id="openapi-datatypes-format-to-java-datatypes"></span><h3><a class="toc-backref" href="#id43">OpenAPIドキュメントのデータ型およびフォーマットとJavaのデータ型の対応仕様</a><a class="headerlink" href="#openapijava" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenAPIドキュメント上で定義されたデータ型とフォーマットに対して、本ツールによるJavaのデータ型の対応表を以下に示す。</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="31%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">OpenAPIでのデータ型( <code class="docutils literal"><span class="pre">type</span></code> )</th>
<th class="head">OpenAPIでのフォーマット( <code class="docutils literal"><span class="pre">format</span></code> )</th>
<th class="head">モデルのプロパティのデータ型</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">java.lang.Integer</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td><code class="docutils literal"><span class="pre">int32</span></code></td>
<td><code class="docutils literal"><span class="pre">java.lang.Integer</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td><code class="docutils literal"><span class="pre">int64</span></code></td>
<td><code class="docutils literal"><span class="pre">java.lang.Long</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">number</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">java.math.BigDecimal</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">number</span></code></td>
<td><code class="docutils literal"><span class="pre">float</span></code></td>
<td><code class="docutils literal"><span class="pre">java.lang.Float</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">number</span></code></td>
<td><code class="docutils literal"><span class="pre">double</span></code></td>
<td><code class="docutils literal"><span class="pre">java.lang.Double</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">boolean</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">java.lang.Boolean</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">java.lang.String</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td><code class="docutils literal"><span class="pre">byte</span></code></td>
<td><code class="docutils literal"><span class="pre">byte[]</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td><code class="docutils literal"><span class="pre">date</span></code></td>
<td><code class="docutils literal"><span class="pre">java.time.LocalDate</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td><code class="docutils literal"><span class="pre">date-time</span></code></td>
<td><code class="docutils literal"><span class="pre">java.time.OffsetDateTime</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td><code class="docutils literal"><span class="pre">number</span></code></td>
<td><code class="docutils literal"><span class="pre">java.math.BigDecimal</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td><code class="docutils literal"><span class="pre">uuid</span></code></td>
<td><code class="docutils literal"><span class="pre">java.util.UUID</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td><code class="docutils literal"><span class="pre">uri</span></code></td>
<td><code class="docutils literal"><span class="pre">java.net.URI</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td>&nbsp;</td>
<td>enum ( <code class="docutils literal"><span class="pre">enum</span></code> を指定すると対応するEnum型を生成する )</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">array</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">java.util.List</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">array</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">java.util.Set</span></code> ( <code class="docutils literal"><span class="pre">uniqueItems:</span> <span class="pre">true</span></code> の場合)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">object</span></code></td>
<td>&nbsp;</td>
<td>対応するモデルの型</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">object</span></code></td>
<td>&nbsp;</td>
<td>対応する型がない場合は <code class="docutils literal"><span class="pre">java.lang.Object</span></code></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">type:</span> <span class="pre">string</span></code> かつ <code class="docutils literal"><span class="pre">format:</span> <span class="pre">binary</span></code> はリクエストのコンテンツタイプが <code class="docutils literal"><span class="pre">multipart/form-data</span></code> の場合のみ利用可能で、それ以外コンテンツタイプやレスポンスのモデル定義内で使用した場合はモデルの生成を中止する。</li>
<li><code class="docutils literal"><span class="pre">type:</span> <span class="pre">string</span></code> の場合は上記表以外にも多数のフォーマットがあるが、すべて <code class="docutils literal"><span class="pre">java.lang.String</span></code> として生成する。</li>
</ul>
</div>
</div>
<div class="section" id="openapibean-validation">
<span id="openapi-property-to-bean-validation"></span><h3><a class="toc-backref" href="#id44">OpenAPIドキュメントのバリデーション定義とBean Validationの対応仕様</a><a class="headerlink" href="#openapibean-validation" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>本ツールでは <code class="docutils literal"><span class="pre">useBeanValidation</span></code> のデフォルト値が <code class="docutils literal"><span class="pre">false</span></code> のためOpenAPIドキュメントの定義に関わらずデフォルトでは <a class="reference internal" href="../../../application_framework/application_framework/libraries/validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a> で使用するアノテーションは注釈しないが、 <code class="docutils literal"><span class="pre">true</span></code> とした場合はOpenAPIドキュメントの記述内容によって以下の2つの方針でプロパティにアノテーションを注釈する。</p>
<ul class="simple">
<li>OpenAPI仕様にて規定されているプロパティに対応するバリデーション</li>
<li>ドメインバリデーション</li>
</ul>
<div class="section" id="id14">
<h4><a class="toc-backref" href="#id45">OpenAPI仕様にて規定されているプロパティに対応するバリデーション</a><a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><a class="reference external" href="https://spec.openapis.org/oas/v3.0.3.html#properties">OpenAPI仕様にて規定されているプロパティ(外部サイト、英語)</a> を使用してバリデーション定義を行った場合、以下の対応表に沿ってアノテーションを注釈する。</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="18%" />
<col width="19%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">OpenAPIでのデータ型( <code class="docutils literal"><span class="pre">type</span></code> )</th>
<th class="head">OpenAPIでのフォーマット( <code class="docutils literal"><span class="pre">format</span></code> )</th>
<th class="head">OpenAPIで使用しているプロパティ</th>
<th class="head">注釈するバリデーション用のアノテーション</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td>(フォーマットは問わない)</td>
<td><code class="docutils literal"><span class="pre">required</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Required.html" title="nablarch.core.validation.ee.Required">Required</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">minimum</span></code> および <code class="docutils literal"><span class="pre">maximum</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/NumberRange.html" title="nablarch.core.validation.ee.NumberRange">NumberRange(min = {minimum}, max = {maximum})</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td><code class="docutils literal"><span class="pre">int32</span></code></td>
<td><code class="docutils literal"><span class="pre">required</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Required.html" title="nablarch.core.validation.ee.Required">Required</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td><code class="docutils literal"><span class="pre">int32</span></code></td>
<td><code class="docutils literal"><span class="pre">minimum</span></code> および <code class="docutils literal"><span class="pre">maximum</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/NumberRange.html" title="nablarch.core.validation.ee.NumberRange">NumberRange(min = {minimum}, max = {maximum})</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td><code class="docutils literal"><span class="pre">int64</span></code></td>
<td><code class="docutils literal"><span class="pre">required</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Required.html" title="nablarch.core.validation.ee.Required">Required</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">integer</span></code></td>
<td><code class="docutils literal"><span class="pre">int64</span></code></td>
<td><code class="docutils literal"><span class="pre">minimum</span></code> および <code class="docutils literal"><span class="pre">maximum</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/NumberRange.html" title="nablarch.core.validation.ee.NumberRange">NumberRange(min = {minimum}, max = {maximum})</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">number</span></code></td>
<td>(フォーマットは問わない)</td>
<td><code class="docutils literal"><span class="pre">required</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Required.html" title="nablarch.core.validation.ee.Required">Required</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">number</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">minimum</span></code> および <code class="docutils literal"><span class="pre">maximum</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/DecimalRange.html" title="nablarch.core.validation.ee.DecimalRange">DecimalRange(min = &#8220;{minimum}&#8221;, max = &#8220;{maximum}&#8221;)</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">number</span></code></td>
<td><code class="docutils literal"><span class="pre">float</span></code></td>
<td><code class="docutils literal"><span class="pre">required</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Required.html" title="nablarch.core.validation.ee.Required">Required</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">number</span></code></td>
<td><code class="docutils literal"><span class="pre">float</span></code></td>
<td><code class="docutils literal"><span class="pre">minimum</span></code> および <code class="docutils literal"><span class="pre">maximum</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/DecimalRange.html" title="nablarch.core.validation.ee.DecimalRange">DecimalRange(min = &#8220;{minimum}&#8221;, max = &#8220;{maximum}&#8221;)</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">number</span></code></td>
<td><code class="docutils literal"><span class="pre">double</span></code></td>
<td><code class="docutils literal"><span class="pre">required</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Required.html" title="nablarch.core.validation.ee.Required">Required</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">number</span></code></td>
<td><code class="docutils literal"><span class="pre">double</span></code></td>
<td><code class="docutils literal"><span class="pre">minimum</span></code> および <code class="docutils literal"><span class="pre">maximum</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/DecimalRange.html" title="nablarch.core.validation.ee.DecimalRange">DecimalRange(min = &#8220;{minimum}&#8221;, max = &#8220;{maximum}&#8221;)</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">boolean</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">required</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Required.html" title="nablarch.core.validation.ee.Required">Required</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td>(フォーマットは問わない)</td>
<td><code class="docutils literal"><span class="pre">required</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Required.html" title="nablarch.core.validation.ee.Required">Required</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">minLength</span></code> および <code class="docutils literal"><span class="pre">maxLength</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Length.html" title="nablarch.core.validation.ee.Length">Length(min = {minLength}, max = {maxLength})</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">string</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">pattern</span></code></td>
<td><a class="reference external" href="https://jakarta.ee/specifications/platform/10/apidocs/jakarta/validation/constraints/Pattern.html" title="jakarta.validation.constraints.Pattern">Pattern(regexp = &#8220;{pattern}&#8221;)</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">array</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">required</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Required.html" title="nablarch.core.validation.ee.Required">Required</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">array</span></code></td>
<td>&nbsp;</td>
<td><code class="docutils literal"><span class="pre">minItems</span></code> および <code class="docutils literal"><span class="pre">maxItems</span></code></td>
<td><a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Size.html" title="nablarch.core.validation.ee.Size">Size(min = {minItems}, max = {maxItems})</a></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">multipleOf</span></code> 、 <code class="docutils literal"><span class="pre">exclusiveMinimum</span></code> 、 <code class="docutils literal"><span class="pre">exclusiveMaximum</span></code> 、 <code class="docutils literal"><span class="pre">minProperties</span></code> 、 <code class="docutils literal"><span class="pre">maxProperties</span></code> には対応していない。</li>
<li><code class="docutils literal"><span class="pre">minimum</span></code> および <code class="docutils literal"><span class="pre">maximum</span></code> 、 <code class="docutils literal"><span class="pre">minLength</span></code> および <code class="docutils literal"><span class="pre">maxLength</span></code> 、 <code class="docutils literal"><span class="pre">minItems</span></code> および <code class="docutils literal"><span class="pre">maxItems</span></code> はどちらか片方だけでも指定可能。</li>
<li>Javaのデータ型が <code class="docutils literal"><span class="pre">java.math.BigDecimal</span></code> 、 <code class="docutils literal"><span class="pre">java.util.List</span></code> 、 <code class="docutils literal"><span class="pre">java.util.Set</span></code> またはモデルの場合は <code class="docutils literal"><span class="pre">Valid</span></code> アノテーションを注釈する。</li>
<li><a class="reference external" href="https://jakarta.ee/specifications/platform/10/apidocs/jakarta/validation/constraints/Pattern.html" title="jakarta.validation.constraints.Pattern">Pattern</a> のみJakarta Bean Validation標準のアノテーションを注釈し、それ以外はNablarchの提供する <a class="reference internal" href="../../../application_framework/application_framework/libraries/validation/bean_validation.html#bean-validation"><span>Bean Validation</span></a> 固有のアノテーションを注釈する。</li>
</ul>
</div>
</div>
<div class="section" id="id16">
<h4><a class="toc-backref" href="#id46">ドメインバリデーション</a><a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>本ツールでは、 <a class="reference external" href="https://spec.openapis.org/oas/v3.0.3.html#specification-extensions">OpenAPI仕様の拡張プロパティ(外部サイト、英語)</a> を使用してOpenAPI仕様では表現できない <a class="reference internal" href="../../../application_framework/application_framework/libraries/validation/bean_validation.html#bean-validation-domain-validation"><span>ドメインバリデーションを使う</span></a> ことをサポートする。</p>
<p>拡張プロパティには <code class="docutils literal"><span class="pre">x-nablarch-domain</span></code> を使用し、値にはドメイン名を指定する。</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">propertyName</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
  <span class="nt">x-nablarch-domain</span><span class="p">:</span> <span class="s">&quot;domainName&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">useBeanValidation</span></code> を <code class="docutils literal"><span class="pre">true</span></code> に指定してソースコードを生成すると、対象のプロパティに <a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/validation/ee/Domain.html" title="nablarch.core.validation.ee.Domain">Domain(&#8220;{domainName}&#8221;)</a> が注釈される。</p>
<p>なお、ドメインバリデーションには様々なバリデーション定義を含めることができるため、 競合する可能性があるバリデーション定義を検出した場合はソースコードの生成を中止する。これは、ドメインに含まれているバリデーションルールと同じものが指定された場合、重複してバリデーションが行われることになるためである。</p>
<p>具体的には、 <code class="docutils literal"><span class="pre">x-nablarch-domain</span></code> を指定したプロパティに対して、 <code class="docutils literal"><span class="pre">minimum</span></code> 、 <code class="docutils literal"><span class="pre">maximum</span></code> 、 <code class="docutils literal"><span class="pre">minLength</span></code> 、 <code class="docutils literal"><span class="pre">maxLength</span></code> 、 <code class="docutils literal"><span class="pre">minItems</span></code> 、 <code class="docutils literal"><span class="pre">maxItems</span></code> 、 <code class="docutils literal"><span class="pre">pattern</span></code> のいずれかが指定されている場合はソースコードの生成を中止する。</p>
<p><code class="docutils literal"><span class="pre">required</span></code> は必須項目を表しドメイン側で強制するものではないため、併用を可能とする。</p>
</div>
</div>
<div class="section" id="id18">
<h3><a class="toc-backref" href="#id47">バリデーションに関する運用上の注意点</a><a class="headerlink" href="#id18" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>本ツールを使用して、バリデーション定義を含めたソースコードを生成する場合の運用上の注意点を記載する。</p>
<div class="section" id="id19">
<h4><a class="toc-backref" href="#id48">OpenAPI仕様の規定範囲では項目単位や相関バリデーションの要求を満たせない場合の注意点</a><a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>OpenAPI仕様で規定されているバリデーションは必須定義と長さチェック、正規表現によるチェックのみのため、業務アプリケーションが求めるものとしては不足することも想定される。</p>
<p>また自動生成されたソースコードを直接修正することは望ましくないため、ドメインバリデーションを使用しても生成されたモデルに相関バリデーションを実装できない。</p>
<p>このため、OpenAPI仕様や本ツールのカバー範囲ではバリデーションの要件を満たすことができず別途実装が必要となり、結果として自動生成したモデルと手動で実装したフォーム等でバリデーション定義が分散されやすい状況になることに注意すること。</p>
<p><strong>自動生成したモデルにはバリデーション定義を含めない場合の実装方法</strong></p>
<p>ここでは、バリデーション定義として自動生成したモデルと同じ定義のフォーム等を作成し、 <a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/core/beans/BeanUtil.html" title="nablarch.core.beans.BeanUtil">BeanUtil</a> を使用してプロパティ値をコピー後、バリデーションを実施する方法を紹介する。</p>
<p>本ツールがデフォルトでバリデーション用のアノテーションを注釈しないのは、前述のとおりバリデーション定義が分散される状況が生まれやすいことを想定しており、それは望ましくないと考えているからである。</p>
<p>考え方としては <a class="reference internal" href="../../../application_framework/application_framework/libraries/validation/bean_validation.html#bean-validation-execute-explicitly"><span>バリデーションの明示的な実行</span></a> と同様で、実装イメージを以下に記載する。</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProjectAction</span> <span class="kd">implements</span> <span class="n">ProjectsApi</span> <span class="o">{</span>  <span class="c1">// ProjectsApiは本ツールで生成したインターフェース</span>

    <span class="c1">// インターフェースに定義されたメソッドを実装</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">EntityResponse</span><span class="o">&lt;</span><span class="n">ProjectResponse</span><span class="o">&gt;</span> <span class="nf">createProject</span><span class="o">(</span><span class="n">ProjectCreateRequest</span> <span class="n">projectCreateRequest</span><span class="o">,</span> <span class="n">JaxRsHttpRequest</span> <span class="n">jaxRsHttpRequest</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// モデルと同じプロパティ定義に、単項目バリデーションや相関バリデーションを加えたフォーム</span>
        <span class="n">ProjectCreateForm</span> <span class="n">form</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// ユーティリティクラス内でモデルからフォームに値をコピーした後、バリデーションを明示的に実行する</span>
            <span class="n">form</span> <span class="o">=</span> <span class="n">ProjectValidatorUtil</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">ProjectCreateForm</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">projectCreateRequest</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ApplicationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// バリデーションエラー時に任意の処理を行う</span>
            <span class="c1">// ...</span>

            <span class="k">throw</span> <span class="n">e</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// 省略</span>

        <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// ユーティリティクラスのイメージ</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">ProjectValidatorUtil</span> <span class="o">{</span>
    <span class="c1">// その他の処理は省略</span>

    <span class="cm">/**</span>
<span class="cm">     * HTTPリクエストからBeanを生成し、バリデーションを行う。</span>
<span class="cm">     *</span>
<span class="cm">     * @param beanClass 生成したいBeanクラス</span>
<span class="cm">     * @param src プロパティのコピー元オブジェクト</span>
<span class="cm">     * @return  プロパティに値が登録されたBeanオブジェクト</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">validate</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">beanClass</span><span class="o">,</span> <span class="n">Object</span> <span class="n">src</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">T</span> <span class="n">bean</span> <span class="o">=</span> <span class="n">BeanUtil</span><span class="o">.</span><span class="na">createAndCopy</span><span class="o">(</span><span class="n">beanClass</span><span class="o">,</span> <span class="n">src</span><span class="o">));</span>
        <span class="n">ValidatorUtil</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">bean</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">bean</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id20">
<h4><a class="toc-backref" href="#id49">ドメインバリデーションを使用する場合の注意点</a><a class="headerlink" href="#id20" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>ドメインバリデーションを使用すると、モデルのプロパティに対するドメインを定義することでバリデーション定義をまとめたりOpenAPI仕様でサポートしていないバリデーションを使用できる。</p>
<p>ただしOpenAPI仕様でサポートしているバリデーション範囲も含めてバリデーション仕様がドメイン側に隠蔽されやすくなり、OpenAPIドキュメントからバリデーション仕様が見えなくなる可能性がある点に注意すること。</p>
</div>
</div>
</div>
<div class="section" id="id21">
<h2><a class="toc-backref" href="#id50">OpenAPIドキュメントと生成されるソースコードの例</a><a class="headerlink" href="#id21" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以下に、OpenAPIドキュメントと生成されるソースコードの例を記載する。</p>
<p>ソースコード生成時の本ツールの設定例は以下とする。この設定と異なる設定項目が必要になる例では、本ツールの設定例も併記する。</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;inputSpec&gt;</span>${project.basedir}/src/main/resources/openapi.yaml<span class="nt">&lt;/inputSpec&gt;</span>
  <span class="nt">&lt;generatorName&gt;</span>nablarch-jaxrs<span class="nt">&lt;/generatorName&gt;</span>
  <span class="nt">&lt;configOptions&gt;</span>
    <span class="nt">&lt;sourceFolder&gt;</span>src/gen/java<span class="nt">&lt;/sourceFolder&gt;</span>
    <span class="nt">&lt;apiPackage&gt;</span>com.example.api<span class="nt">&lt;/apiPackage&gt;</span>
    <span class="nt">&lt;modelPackage&gt;</span>com.example.model<span class="nt">&lt;/modelPackage&gt;</span>
  <span class="nt">&lt;/configOptions&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</pre></div>
</div>
<p>なお、記載している各種例はイメージを掴むことを目的とするため抜粋での記載としている。</p>
<div class="section" id="id22">
<h3><a class="toc-backref" href="#id51">OpenAPIドキュメントのパスおよびオペレーションの定義とソースコードの生成例</a><a class="headerlink" href="#id22" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenAPIドキュメント例</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">/projects</span><span class="p">:</span>
  <span class="nt">post</span><span class="p">:</span>
    <span class="nt">tags</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">project</span>
    <span class="nt">summary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトを登録する</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトを登録する</span>
    <span class="nt">operationId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">createProject</span>
    <span class="nt">requestBody</span><span class="p">:</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト登録情報</span>
      <span class="nt">content</span><span class="p">:</span>
        <span class="nt">application/json</span><span class="p">:</span>
          <span class="nt">schema</span><span class="p">:</span>
            <span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;#/components/schemas/ProjectCreateRequest&#39;</span>
    <span class="nt">responses</span><span class="p">:</span>
      <span class="s">&quot;200&quot;</span><span class="p p-Indicator">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">登録したプロジェクト情報</span>
        <span class="nt">content</span><span class="p">:</span>
          <span class="nt">application/json</span><span class="p">:</span>
            <span class="nt">schema</span><span class="p">:</span>
              <span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;#/components/schemas/ProjectResponse&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">/projects/{id}</span><span class="p p-Indicator">:</span>
  <span class="nt">get</span><span class="p">:</span>
    <span class="nt">tags</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">project</span>
    <span class="nt">summary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトを取得する</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトIDを指定してプロジェクトを取得する</span>
    <span class="nt">operationId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">findProjectById</span>
    <span class="nt">parameters</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">id</span>
      <span class="nt">in</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ID</span>
      <span class="nt">required</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">schema</span><span class="p">:</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="nt">responses</span><span class="p">:</span>
      <span class="s">&quot;200&quot;</span><span class="p p-Indicator">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">取得したプロジェクト情報</span>
        <span class="nt">content</span><span class="p">:</span>
          <span class="nt">application/json</span><span class="p">:</span>
            <span class="nt">schema</span><span class="p">:</span>
              <span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;#/components/schemas/ProjectResponse&#39;</span>
      <span class="s">&quot;404&quot;</span><span class="p p-Indicator">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトが見つからなかった場合</span>
</pre></div>
</div>
<p>本ツールにより生成されるリソース(アクション)インターフェース例</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/projects&quot;</span><span class="o">)</span>
<span class="nd">@jakarta.annotation.Generated</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;nablarch.tool.openapi.codegen.JavaNablarchJaxrsServerCodegen&quot;</span><span class="o">,</span> <span class="n">date</span> <span class="o">=</span> <span class="s">&quot;2024-12-10T13:54:26.470544738+09:00[Asia/Tokyo]&quot;</span><span class="o">,</span> <span class="n">comments</span> <span class="o">=</span> <span class="s">&quot;Generator version: 7.10.0&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ProjectsApi</span> <span class="o">{</span>
    <span class="cm">/**</span>
<span class="cm">     * POST  : プロジェクトを登録する</span>
<span class="cm">     *</span>
<span class="cm">     * プロジェクトを登録する</span>
<span class="cm">     *</span>
<span class="cm">     * @param projectCreateRequest プロジェクト登録情報</span>
<span class="cm">     * @param jaxRsHttpRequest HTTPリクエスト</span>
<span class="cm">     * @param context ハンドラ実行コンテキスト</span>
<span class="cm">     * @return 登録したプロジェクト情報</span>
<span class="cm">     */</span>
    <span class="nd">@POST</span>
    <span class="nd">@Consumes</span><span class="o">({</span> <span class="s">&quot;application/json&quot;</span> <span class="o">})</span>
    <span class="nd">@Produces</span><span class="o">({</span> <span class="s">&quot;application/json&quot;</span> <span class="o">})</span>
    <span class="n">EntityResponse</span><span class="o">&lt;</span><span class="n">ProjectResponse</span><span class="o">&gt;</span> <span class="nf">createProject</span><span class="o">(</span><span class="n">ProjectCreateRequest</span> <span class="n">projectCreateRequest</span><span class="o">,</span> <span class="n">JaxRsHttpRequest</span> <span class="n">jaxRsHttpRequest</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">);</span>

    <span class="cm">/**</span>
<span class="cm">     * GET /{id} : プロジェクトを取得する</span>
<span class="cm">     *</span>
<span class="cm">     * プロジェクトIDを指定してプロジェクトを取得する</span>
<span class="cm">     *</span>
<span class="cm">     * @param jaxRsHttpRequest HTTPリクエスト</span>
<span class="cm">     * @param context ハンドラ実行コンテキスト</span>
<span class="cm">     * @return 取得したプロジェクト情報</span>
<span class="cm">     * @return プロジェクトが見つからなかった場合</span>
<span class="cm">     */</span>
    <span class="nd">@GET</span>
    <span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/{id}&quot;</span><span class="o">)</span>
    <span class="nd">@Produces</span><span class="o">({</span> <span class="s">&quot;application/json&quot;</span> <span class="o">})</span>
    <span class="n">EntityResponse</span><span class="o">&lt;</span><span class="n">ProjectResponse</span><span class="o">&gt;</span> <span class="nf">findProjectById</span><span class="o">(</span><span class="n">JaxRsHttpRequest</span> <span class="n">jaxRsHttpRequest</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">);</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id23">
<h3><a class="toc-backref" href="#id52">OpenAPIドキュメントのスキーマの定義とソースコードの生成例</a><a class="headerlink" href="#id23" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenAPIドキュメント例</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">ProjectResponse</span><span class="p">:</span>
  <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト情報</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
  <span class="nt">properties</span><span class="p">:</span>
    <span class="nt">id</span><span class="p">:</span>
      <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">uuid</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトID</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="nt">name</span><span class="p">:</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト名</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="nt">sales</span><span class="p">:</span>
      <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">int64</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">売上</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">integer</span>
    <span class="nt">startDate</span><span class="p">:</span>
      <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">date</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">開始日</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="nt">endDate</span><span class="p">:</span>
      <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">date</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">終了日</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
</pre></div>
</div>
<p>本ツールにより生成されるモデル例</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@JsonTypeName</span><span class="o">(</span><span class="s">&quot;ProjectResponse&quot;</span><span class="o">)</span>
<span class="nd">@jakarta.annotation.Generated</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;nablarch.tool.openapi.codegen.JavaNablarchJaxrsServerCodegen&quot;</span><span class="o">,</span> <span class="n">date</span> <span class="o">=</span> <span class="s">&quot;2024-12-10T13:54:26.470544738+09:00[Asia/Tokyo]&quot;</span><span class="o">,</span> <span class="n">comments</span> <span class="o">=</span> <span class="s">&quot;Generator version: 7.10.0&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProjectResponse</span>   <span class="o">{</span>
  <span class="kd">private</span> <span class="n">UUID</span> <span class="n">id</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Long</span> <span class="n">sales</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">LocalDate</span> <span class="n">startDate</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">LocalDate</span> <span class="n">endDate</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * プロジェクトID</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectResponse</span> <span class="nf">id</span><span class="o">(</span><span class="n">UUID</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">UUID</span> <span class="nf">getId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="o">(</span><span class="n">UUID</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * プロジェクト名</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectResponse</span> <span class="nf">name</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 売上</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectResponse</span> <span class="nf">sales</span><span class="o">(</span><span class="n">Long</span> <span class="n">sales</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">sales</span> <span class="o">=</span> <span class="n">sales</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;sales&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">getSales</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">sales</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;sales&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSales</span><span class="o">(</span><span class="n">Long</span> <span class="n">sales</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">sales</span> <span class="o">=</span> <span class="n">sales</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 開始日</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectResponse</span> <span class="nf">startDate</span><span class="o">(</span><span class="n">LocalDate</span> <span class="n">startDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">startDate</span> <span class="o">=</span> <span class="n">startDate</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;startDate&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">LocalDate</span> <span class="nf">getStartDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">startDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;startDate&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setStartDate</span><span class="o">(</span><span class="n">LocalDate</span> <span class="n">startDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">startDate</span> <span class="o">=</span> <span class="n">startDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 終了日</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectResponse</span> <span class="nf">endDate</span><span class="o">(</span><span class="n">LocalDate</span> <span class="n">endDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">endDate</span> <span class="o">=</span> <span class="n">endDate</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;endDate&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">LocalDate</span> <span class="nf">getEndDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">endDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;endDate&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEndDate</span><span class="o">(</span><span class="n">LocalDate</span> <span class="n">endDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">endDate</span> <span class="o">=</span> <span class="n">endDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// hashCode、equals、toString等は省略</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id24">
<h3><a class="toc-backref" href="#id53">Bean Validationを使用するソースコードの生成例</a><a class="headerlink" href="#id24" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenAPIドキュメント例</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1">## パスおよびオペレーション</span>
<span class="nt">/projects</span><span class="p">:</span>
  <span class="nt">post</span><span class="p">:</span>
    <span class="nt">tags</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">project</span>
    <span class="nt">summary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトを作成する</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトを作成する</span>
    <span class="nt">operationId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">createProject</span>
    <span class="nt">requestBody</span><span class="p">:</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト登録情報</span>
      <span class="nt">content</span><span class="p">:</span>
        <span class="nt">application/json</span><span class="p">:</span>
          <span class="nt">schema</span><span class="p">:</span>
            <span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;#/components/schemas/ProjectCreateRequest&#39;</span>
    <span class="nt">responses</span><span class="p">:</span>
      <span class="s">&quot;200&quot;</span><span class="p p-Indicator">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">project created</span>
        <span class="nt">content</span><span class="p">:</span>
          <span class="nt">application/json</span><span class="p">:</span>
            <span class="nt">schema</span><span class="p">:</span>
              <span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;#/components/schemas/ProjectResponse&#39;</span>

  <span class="c1">## スキーマ</span>
  <span class="nt">ProjectCreateRequest</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト作成リクエスト</span>
    <span class="nt">required</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">projectName</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">projectType</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">startDate</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">projectName</span><span class="p">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト名</span>
        <span class="nt">maxLength</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
        <span class="nt">minLength</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
      <span class="nt">projectType</span><span class="p">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト種別</span>
        <span class="nt">maxLength</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100</span>
        <span class="nt">minLength</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
      <span class="nt">startDate</span><span class="p">:</span>
        <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">date</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">開始日</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
      <span class="nt">endDate</span><span class="p">:</span>
        <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">date</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">終了日</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
</pre></div>
</div>
<p>本ツールの設定例</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;inputSpec&gt;</span>${project.basedir}/src/main/resources/openapi.yaml<span class="nt">&lt;/inputSpec&gt;</span>
  <span class="nt">&lt;generatorName&gt;</span>nablarch-jaxrs<span class="nt">&lt;/generatorName&gt;</span>
  <span class="nt">&lt;configOptions&gt;</span>
    <span class="nt">&lt;sourceFolder&gt;</span>src/gen/java<span class="nt">&lt;/sourceFolder&gt;</span>
    <span class="nt">&lt;apiPackage&gt;</span>com.example.api<span class="nt">&lt;/apiPackage&gt;</span>
    <span class="nt">&lt;modelPackage&gt;</span>com.example.model<span class="nt">&lt;/modelPackage&gt;</span>
    <span class="c">&lt;!-- Bean Validationを使用する場合はuseBeanValidationにtrueを指定する --&gt;</span>
    <span class="nt">&lt;useBeanValidation&gt;</span>true<span class="nt">&lt;/useBeanValidation&gt;</span>
  <span class="nt">&lt;/configOptions&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</pre></div>
</div>
<p>本ツールにより生成されるリソース(アクション)インターフェース例</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/projects&quot;</span><span class="o">)</span>
<span class="nd">@jakarta.annotation.Generated</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;nablarch.tool.openapi.codegen.JavaNablarchJaxrsServerCodegen&quot;</span><span class="o">,</span> <span class="n">date</span> <span class="o">=</span> <span class="s">&quot;2024-12-10T13:54:26.470544738+09:00[Asia/Tokyo]&quot;</span><span class="o">,</span> <span class="n">comments</span> <span class="o">=</span> <span class="s">&quot;Generator version: 7.10.0&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ProjectsApi</span> <span class="o">{</span>
    <span class="cm">/**</span>
<span class="cm">     * POST  : プロジェクトを作成する</span>
<span class="cm">     *</span>
<span class="cm">     * プロジェクトを作成する</span>
<span class="cm">     *</span>
<span class="cm">     * @param projectCreateRequest プロジェクト登録情報</span>
<span class="cm">     * @param jaxRsHttpRequest HTTPリクエスト</span>
<span class="cm">     * @param context ハンドラ実行コンテキスト</span>
<span class="cm">     * @return project created</span>
<span class="cm">     */</span>
    <span class="nd">@POST</span>
    <span class="nd">@Consumes</span><span class="o">({</span> <span class="s">&quot;application/json&quot;</span> <span class="o">})</span>
    <span class="nd">@Produces</span><span class="o">({</span> <span class="s">&quot;application/json&quot;</span> <span class="o">})</span>
    <span class="c1">// HTTPボディでリクエストを受け取る場合に@Validアノテーションが付与される</span>
    <span class="nd">@Valid</span>
    <span class="n">EntityResponse</span><span class="o">&lt;</span><span class="n">ProjectResponse</span><span class="o">&gt;</span> <span class="nf">createProject</span><span class="o">(</span><span class="n">ProjectCreateRequest</span> <span class="n">projectCreateRequest</span><span class="o">,</span> <span class="n">JaxRsHttpRequest</span> <span class="n">jaxRsHttpRequest</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">);</span>

<span class="o">}</span>
</pre></div>
</div>
<p>本ツールにより生成されるモデル例</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@JsonTypeName</span><span class="o">(</span><span class="s">&quot;ProjectCreateRequest&quot;</span><span class="o">)</span>
<span class="nd">@jakarta.annotation.Generated</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;nablarch.tool.openapi.codegen.JavaNablarchJaxrsServerCodegen&quot;</span><span class="o">,</span> <span class="n">date</span> <span class="o">=</span> <span class="s">&quot;2024-12-10T13:54:26.470544738+09:00[Asia/Tokyo]&quot;</span><span class="o">,</span> <span class="n">comments</span> <span class="o">=</span> <span class="s">&quot;Generator version: 7.10.0&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProjectCreateRequest</span>   <span class="o">{</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">projectName</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">projectType</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">LocalDate</span> <span class="n">startDate</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">LocalDate</span> <span class="n">endDate</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * プロジェクト名</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectCreateRequest</span> <span class="nf">projectName</span><span class="o">(</span><span class="n">String</span> <span class="n">projectName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">projectName</span> <span class="o">=</span> <span class="n">projectName</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;projectName&quot;</span><span class="o">)</span>
    <span class="nd">@Required</span> <span class="nd">@Length</span><span class="o">(</span><span class="n">min</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">100</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getProjectName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">projectName</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;projectName&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setProjectName</span><span class="o">(</span><span class="n">String</span> <span class="n">projectName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">projectName</span> <span class="o">=</span> <span class="n">projectName</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * プロジェクト種別</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectCreateRequest</span> <span class="nf">projectType</span><span class="o">(</span><span class="n">String</span> <span class="n">projectType</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">projectType</span> <span class="o">=</span> <span class="n">projectType</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;projectType&quot;</span><span class="o">)</span>
    <span class="nd">@Required</span> <span class="nd">@Length</span><span class="o">(</span><span class="n">min</span> <span class="o">=</span> <span class="mi">1</span><span class="o">,</span> <span class="n">max</span> <span class="o">=</span> <span class="mi">100</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getProjectType</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">projectType</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;projectType&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setProjectType</span><span class="o">(</span><span class="n">String</span> <span class="n">projectType</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">projectType</span> <span class="o">=</span> <span class="n">projectType</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 開始日</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectCreateRequest</span> <span class="nf">startDate</span><span class="o">(</span><span class="n">LocalDate</span> <span class="n">startDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">startDate</span> <span class="o">=</span> <span class="n">startDate</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;startDate&quot;</span><span class="o">)</span>
    <span class="nd">@Required</span>
    <span class="kd">public</span> <span class="n">LocalDate</span> <span class="nf">getStartDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">startDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;startDate&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setStartDate</span><span class="o">(</span><span class="n">LocalDate</span> <span class="n">startDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">startDate</span> <span class="o">=</span> <span class="n">startDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * 終了日</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectCreateRequest</span> <span class="nf">endDate</span><span class="o">(</span><span class="n">LocalDate</span> <span class="n">endDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">endDate</span> <span class="o">=</span> <span class="n">endDate</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;endDate&quot;</span><span class="o">)</span>

    <span class="kd">public</span> <span class="n">LocalDate</span> <span class="nf">getEndDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">endDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;endDate&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEndDate</span><span class="o">(</span><span class="n">LocalDate</span> <span class="n">endDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">endDate</span> <span class="o">=</span> <span class="n">endDate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// hashCode、equals、toString等は省略</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id25">
<h3><a class="toc-backref" href="#id54">ドメインバリデーションを使用するソースコードの生成例</a><a class="headerlink" href="#id25" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenAPIドキュメント例</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1">## パスおよびオペレーション</span>
<span class="nt">/projects</span><span class="p">:</span>
  <span class="nt">post</span><span class="p">:</span>
    <span class="nt">tags</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">project</span>
    <span class="nt">summary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトを作成する</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクトを作成する</span>
    <span class="nt">operationId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">createProject</span>
    <span class="nt">requestBody</span><span class="p">:</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト登録情報</span>
      <span class="nt">content</span><span class="p">:</span>
        <span class="nt">application/json</span><span class="p">:</span>
          <span class="nt">schema</span><span class="p">:</span>
            <span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;#/components/schemas/ProjectCreateRequest&#39;</span>
    <span class="nt">responses</span><span class="p">:</span>
      <span class="s">&quot;200&quot;</span><span class="p p-Indicator">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">project created</span>
        <span class="nt">content</span><span class="p">:</span>
          <span class="nt">application/json</span><span class="p">:</span>
            <span class="nt">schema</span><span class="p">:</span>
              <span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;#/components/schemas/ProjectResponse&#39;</span>

  <span class="c1">## スキーマ</span>
  <span class="nt">ProjectCreateRequest</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト作成リクエスト</span>
    <span class="nt">required</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">projectName</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">projectName</span><span class="p">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">プロジェクト名</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
        <span class="c1">## ドメインバリデーションの使用</span>
        <span class="nt">x-nablarch-domain</span><span class="p">:</span> <span class="s">&quot;projectName&quot;</span>
</pre></div>
</div>
<p>本ツールの設定例</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;inputSpec&gt;</span>${project.basedir}/src/main/resources/openapi.yaml<span class="nt">&lt;/inputSpec&gt;</span>
  <span class="nt">&lt;generatorName&gt;</span>nablarch-jaxrs<span class="nt">&lt;/generatorName&gt;</span>
  <span class="nt">&lt;configOptions&gt;</span>
    <span class="nt">&lt;sourceFolder&gt;</span>src/gen/java<span class="nt">&lt;/sourceFolder&gt;</span>
    <span class="nt">&lt;apiPackage&gt;</span>com.example.api<span class="nt">&lt;/apiPackage&gt;</span>
    <span class="nt">&lt;modelPackage&gt;</span>com.example.model<span class="nt">&lt;/modelPackage&gt;</span>
    <span class="c">&lt;!-- Bean Validationを使用する場合はuseBeanValidationにtrueを指定する --&gt;</span>
    <span class="nt">&lt;useBeanValidation&gt;</span>true<span class="nt">&lt;/useBeanValidation&gt;</span>
  <span class="nt">&lt;/configOptions&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</pre></div>
</div>
<p>本ツールにより生成されるモデル例</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@JsonTypeName</span><span class="o">(</span><span class="s">&quot;ProjectCreateRequest&quot;</span><span class="o">)</span>
<span class="nd">@jakarta.annotation.Generated</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;nablarch.tool.openapi.codegen.JavaNablarchJaxrsServerCodegen&quot;</span><span class="o">,</span> <span class="n">date</span> <span class="o">=</span> <span class="s">&quot;2024-12-10T13:54:26.470544738+09:00[Asia/Tokyo]&quot;</span><span class="o">,</span> <span class="n">comments</span> <span class="o">=</span> <span class="s">&quot;Generator version: 7.10.0&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProjectCreateRequest</span>   <span class="o">{</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">projectName</span><span class="o">;</span>

    <span class="cm">/**</span>
<span class="cm">     * プロジェクト名</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ProjectCreateRequest</span> <span class="nf">projectName</span><span class="o">(</span><span class="n">String</span> <span class="n">projectName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">projectName</span> <span class="o">=</span> <span class="n">projectName</span><span class="o">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>


    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;projectName&quot;</span><span class="o">)</span>
    <span class="nd">@Required</span> <span class="nd">@Domain</span><span class="o">(</span><span class="s">&quot;projectName&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getProjectName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">projectName</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;projectName&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setProjectName</span><span class="o">(</span><span class="n">String</span> <span class="n">projectName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">projectName</span> <span class="o">=</span> <span class="n">projectName</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// hashCode、equals、toString等は省略</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id26">
<h3><a class="toc-backref" href="#id55">ファイルアップロードの定義例</a><a class="headerlink" href="#id26" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenAPIドキュメント例</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1">## パスおよびオペレーション</span>
<span class="nt">/customers/upload</span><span class="p">:</span>
  <span class="nt">post</span><span class="p">:</span>
    <span class="nt">tags</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">customer</span>
    <span class="nt">summary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">顧客CSVファイルをアップロードする</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">顧客CSVファイルをアップロードして顧客情報を取り込む</span>
    <span class="nt">operationId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">uploadCustomersCsvFile</span>
    <span class="nt">requestBody</span><span class="p">:</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">顧客CSVファイル情報</span>
      <span class="nt">content</span><span class="p">:</span>
        <span class="nt">multipart/form-data</span><span class="p">:</span>
          <span class="nt">schema</span><span class="p">:</span>
            <span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;#/components/schemas/CustomersCsvFileUploadRequest&#39;</span>
    <span class="nt">responses</span><span class="p">:</span>
      <span class="s">&quot;200&quot;</span><span class="p p-Indicator">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">顧客CSVファイルアップロード取り込み結果</span>
        <span class="nt">content</span><span class="p">:</span>
          <span class="nt">application/json</span><span class="p">:</span>
            <span class="nt">schema</span><span class="p">:</span>
              <span class="nt">$ref</span><span class="p">:</span> <span class="s">&#39;#/components/schemas/CustomersCsvFileUploadResultResponse&#39;</span>


  <span class="c1">## スキーマ</span>
  <span class="nt">CustomersCsvFileUploadRequest</span><span class="p">:</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">顧客CSVファイル情報</span>
    <span class="nt">required</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">fileName</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">fileName</span><span class="p">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ファイル名</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
      <span class="nt">file</span><span class="p">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">顧客CSVファイル</span>
        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
        <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">binary</span>
</pre></div>
</div>
<p>本ツールにより生成されるリソース(アクション)インターフェース例</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/customers/upload&quot;</span><span class="o">)</span>
<span class="nd">@jakarta.annotation.Generated</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;nablarch.tool.openapi.codegen.JavaNablarchJaxrsServerCodegen&quot;</span><span class="o">,</span> <span class="n">date</span> <span class="o">=</span> <span class="s">&quot;2024-12-10T14:36:36.602623815+09:00[Asia/Tokyo]&quot;</span><span class="o">,</span> <span class="n">comments</span> <span class="o">=</span> <span class="s">&quot;Generator version: 7.10.0&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CustomersApi</span> <span class="o">{</span>
    <span class="cm">/**</span>
<span class="cm">     * POST  : 顧客CSVファイルをアップロードする</span>
<span class="cm">     *</span>
<span class="cm">     * 顧客CSVファイルをアップロードして顧客情報を取り込む</span>
<span class="cm">     *</span>
<span class="cm">     * @param jaxRsHttpRequest HTTPリクエスト</span>
<span class="cm">     * @param context ハンドラ実行コンテキスト</span>
<span class="cm">     * @return 顧客CSVファイルアップロード取り込み結果</span>
<span class="cm">     */</span>
    <span class="nd">@POST</span>
    <span class="nd">@Consumes</span><span class="o">({</span> <span class="s">&quot;multipart/form-data&quot;</span> <span class="o">})</span>
    <span class="nd">@Produces</span><span class="o">({</span> <span class="s">&quot;application/json&quot;</span> <span class="o">})</span>
    <span class="n">EntityResponse</span><span class="o">&lt;</span><span class="n">CustomersCsvFileUploadResultResponse</span><span class="o">&gt;</span> <span class="nf">uploadCustomersCsvFile</span><span class="o">(</span><span class="n">JaxRsHttpRequest</span> <span class="n">jaxRsHttpRequest</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">);</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">ファイルアップロードの場合、リクエストのコンテンツタイプには <code class="docutils literal"><span class="pre">multipart/form-data</span></code> を指定する。またアップロードファイルには <code class="docutils literal"><span class="pre">type:</span> <span class="pre">string</span></code> かつ <code class="docutils literal"><span class="pre">format:</span> <span class="pre">binary</span></code> を指定する。この時、スキーマに対応するモデルのソースコードは生成されない。アップロードされたファイルは <a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/jaxrs/JaxRsHttpRequest.html" title="nablarch.fw.jaxrs.JaxRsHttpRequest">JaxRsHttpRequest</a> より取得する。</p>
</div>
</div>
<div class="section" id="id27">
<h3><a class="toc-backref" href="#id56">ファイルダウンロードの定義例</a><a class="headerlink" href="#id27" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>OpenAPIドキュメント例</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">/customers/upload</span><span class="p">:</span>
  <span class="nt">get</span><span class="p">:</span>
    <span class="nt">tags</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">customer</span>
    <span class="nt">summary</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">顧客情報をCSVファイルとしてダウンロードする</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">顧客情報をCSVファイルとしてダウンロードする</span>
    <span class="nt">operationId</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">downloadCustomersCsvFile</span>
    <span class="nt">responses</span><span class="p">:</span>
      <span class="s">&quot;200&quot;</span><span class="p p-Indicator">:</span>
        <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">顧客CSVファイル</span>
        <span class="nt">content</span><span class="p">:</span>
          <span class="nt">text/csv</span><span class="p">:</span>
            <span class="nt">schema</span><span class="p">:</span>
              <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
              <span class="nt">format</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">binary</span>
</pre></div>
</div>
<p>本ツールにより生成されるリソース(アクション)インターフェース例</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/customers/upload&quot;</span><span class="o">)</span>
<span class="nd">@jakarta.annotation.Generated</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;nablarch.tool.openapi.codegen.JavaNablarchJaxrsServerCodegen&quot;</span><span class="o">,</span> <span class="n">date</span> <span class="o">=</span> <span class="s">&quot;2024-12-10T14:48:03.670170037+09:00[Asia/Tokyo]&quot;</span><span class="o">,</span> <span class="n">comments</span> <span class="o">=</span> <span class="s">&quot;Generator version: 7.10.0&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CustomersApi</span> <span class="o">{</span>
    <span class="cm">/**</span>
<span class="cm">     * GET  : 顧客情報をCSVファイルとしてダウンロードする</span>
<span class="cm">     *</span>
<span class="cm">     * 顧客情報をCSVファイルとしてダウンロードする</span>
<span class="cm">     *</span>
<span class="cm">     * @param jaxRsHttpRequest HTTPリクエスト</span>
<span class="cm">     * @param context ハンドラ実行コンテキスト</span>
<span class="cm">     * @return 顧客CSVファイル</span>
<span class="cm">     */</span>
    <span class="nd">@GET</span>
    <span class="n">HttpResponse</span> <span class="nf">downloadCustomersCsvFile</span><span class="o">(</span><span class="n">JaxRsHttpRequest</span> <span class="n">jaxRsHttpRequest</span><span class="o">,</span> <span class="n">ExecutionContext</span> <span class="n">context</span><span class="o">);</span>

<span class="o">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">補足</p>
<p class="last">ファイルダウンロードではレスポンスのコンテンツタイプは任意となる。レスポンスのスキーマ定義は <code class="docutils literal"><span class="pre">type:</span> <span class="pre">string</span></code> かつ <code class="docutils literal"><span class="pre">format:</span> <span class="pre">binary</span></code> とし、ダウンロードするファイルの内容やレスポンスヘッダは <a class="reference external" href="https://nablarch.github.io/docs/6u3/javadoc/nablarch/fw/web/HttpResponse.html" title="nablarch.fw.web.HttpResponse">HttpResponse</a> を使って設定する。</p>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2025, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'6u3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/custom.js"></script>
      <script type="text/javascript" src="../../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>