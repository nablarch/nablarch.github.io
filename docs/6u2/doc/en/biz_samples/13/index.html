


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv='content-language' content='ja'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sample Request/Response Log Output Using Logbook &mdash; ∇Nablarch  6u2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  

  
  <link rel="canonical" href="https://nablarch.github.io/docs/LATEST/doc/biz_samples/13/index.html" />
  
    <link rel="top" title="∇Nablarch  6u2 documentation" href="../../index.html"/>
        <link rel="up" title="Implementation Examples Per Use Cases" href="../index.html"/>
        <link rel="next" title="Useful content for development in Nablarch" href="../../external_contents/index.html"/>
        <link rel="prev" title="Authentication sample using OIDC ID token" href="../12/index.html"/>

<script defer data-domain="nablarch.github.io,all.fintan" src=https://plausible.io/js/script.js></script>


  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
  
  <a href="../../index.html" id="sidebar-title" class="icon"> ∇Nablarch 
  

  
    <div id="sidebar-version">Version: 6u2</div>
  </a>

  <div role="search">
    <form id="google-search-form" class="wy-form" method="get" action="https://www.google.co.jp/search">
      <input type="text" name="text" placeholder="Search docs on google" id="text"/>
      <input type="hidden" name="q" id="q"/>
    </form>
  </div>
    
    

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about_nablarch/index.html">What is the Nablarch?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about_nablarch/concept.html">Nablarch Concept</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../about_nablarch/concept.html#robustness">Robustness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about_nablarch/concept.html#testability">Testability</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about_nablarch/concept.html#ready-to-use">Ready-to-Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../about_nablarch/mvn_module.html">Module List of Nablarch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about_nablarch/license.html">Information on Nablarch License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../application_framework/index.html">Nablarch Application Framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../application_framework/application_framework/index.html">Application Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/nablarch/index.html">What is Nablarch Application Framework?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/web/index.html">Web Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/web_service/index.html">Web Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/batch/index.html">Batch Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/messaging/index.html">Messaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/handlers/index.html">Standard Handler Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/libraries/index.html">Libraries Provided by Nablarch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/blank_project/index.html">Blank Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/setting_guide/index.html">Nablarch Application Framework Configuration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/configuration/index.html">Default Configuration List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/application_framework/cloud_native/index.html">Nablarch Cloud Native Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../application_framework/adaptors/index.html">Adaptor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/log_adaptor.html">log Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/router_adaptor.html">Routing Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/webspheremq_adaptor.html">IBM MQ Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/jaxrs_adaptor.html">Jakarta RESTful Web Services Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/doma_adaptor.html">Doma Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/jsr310_adaptor.html">JSR310(Date and Time API)Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/mail_sender_freemarker_adaptor.html">E-mail FreeMarker Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/mail_sender_thymeleaf_adaptor.html">E-mail Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/mail_sender_velocity_adaptor.html">E-mail Velocity Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/web_thymeleaf_adaptor.html">Web Application Thymeleaf Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/lettuce_adaptor.html">Lettuce Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/slf4j_adaptor.html">SLF4J Adapter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../application_framework/adaptors/micrometer_adaptor.html">Micrometer Adapter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development_tools/index.html">Nablarch development tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../development_tools/java_static_analysis/index.html">Efficient Java Static Checks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../development_tools/java_static_analysis/index.html#run-inspection">Run inspection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../development_tools/java_static_analysis/index.html#unify-the-format">Unify the format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../development_tools/java_static_analysis/index.html#check-if-unauthorized-apis-are-being-used">Check if unauthorized APIs are being used</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../development_tools/testing_framework/index.html">Testing framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../development_tools/testing_framework/guide/development_guide/05_UnitTestGuide/index.html">How to Execute Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../development_tools/testing_framework/guide/development_guide/06_TestFWGuide/index.html">How to Use the Automated Test Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../development_tools/testing_framework/guide/development_guide/08_TestTools/index.html">Tools Used in the Programming Phase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../development_tools/toolbox/index.html">Useful Tools When Developing Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../development_tools/toolbox/JspStaticAnalysis/index.html">Jakarta Server Pages Static Analysis Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../development_tools/toolbox/SqlExecutor/SqlExecutor.html">Nablarch SQL Executor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/index.html">Example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#how-to-run-example">How to Run Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/index.html#procedure-to-build-the-environment">Procedure to build the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/index.html#procedure-to-execute">Procedure to execute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/index.html#running-on-java-21">Running on Java 21</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#list-of-example">List of Example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/index.html#web-application">Web application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/index.html#web-service">Web Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/index.html#batch-application">Batch Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/index.html#messaging">Messaging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Implementation Examples Per Use Cases</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../01/index.html">Sample Password Encryption Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../01/0101_PBKDF2PasswordEncryptor.html">Sample Password Encryption Function Using PBKDF2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../01/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../01/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../01/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../01/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../03/index.html">Display a List of Search Results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#universaldao-class">UniversalDao class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#listsearchinfo-class">ListSearchInfo class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#pagination-class">Pagination class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#entitylist-class">EntityList class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#listsearchresult-tag">listSearchResult tag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#how-to-import-a-sample-implementation-tag-file-into-the-business-application">How to import a sample implementation (tag file) into the business application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03/index.html#tag-reference">Tag Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../04/index.html">Extended Formatter Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../04/0401_ExtendedDataFormatter.html">Data Formatter Expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../04/0402_ExtendedFieldType.html">Field Type Expansion in the Data Formatter Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../05/index.html">Sample File Management Function Using Database</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../05/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05/index.html#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../05/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../08/index.html">Sample of HTML Email Send Function</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../08/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../08/index.html#implementation-examples">Implementation examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../09/index.html">How to Use a Sample to Send a Digitally Signed Email Using Bouncycastle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../09/index.html#environment-preparation">Environment preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../09/index.html#structure-of-digitally-signed-email-send-function">Structure of digitally signed email send function</a></li>
<li class="toctree-l3"><a class="reference internal" href="../09/index.html#preparation-of-configuration-file">Preparation of configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../09/index.html#execution">Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../10/index.html">How to Use the Log Aggregation Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../10/index.html#list-of-samples-provided">List of samples provided</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../11/index.html">Messaging Platform Test Simulator Sample</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../11/index.html#uses">Uses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11/index.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11/index.html#request">Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11/index.html#how-to-use">How to use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../11/index.html#expansion-example">Expansion example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../12/index.html">Authentication sample using OIDC ID token</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../12/index.html#delivery-package">Delivery package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../12/index.html#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../12/index.html#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../12/index.html#how-to-use">How to Use</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Sample Request/Response Log Output Using Logbook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-use">How to Use</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../external_contents/index.html">Useful content for development in Nablarch</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../external_contents/index.html#nablarch-system-development-guide">Nablarch System Development Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../external_contents/index.html#development-standards">Development Standards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../nablarch_api/index.html">Nablarch API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about_nablarch/versionup_policy.html">Nablarch upgrade policy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about_nablarch/versionup_policy.html#release-unit">Release unit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about_nablarch/versionup_policy.html#types-of-upgrades">Types of upgrades</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about_nablarch/versionup_policy.html#version-numbering-system">Version numbering system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about_nablarch/versionup_policy.html#backward-compatibility-policy">Backward compatibility policy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../about_nablarch/versionup_policy.html#extent-to-which-backward-compatibility-is-maintained">Extent to which backward compatibility is maintained</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about_nablarch/versionup_policy.html#contents-of-backward-compatibility-maintenance">Contents of backward compatibility maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about_nablarch/versionup_policy.html#backward-compatibility-exception">Backward compatibility exception</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../migration/index.html">Nablarch 5 to 6 Migration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../migration/index.html#major-differences-between-nablarch-5-and-6">Major differences between Nablarch 5 and 6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../migration/index.html#supports-jakarta-ee-10">Supports Jakarta EE 10</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../migration/index.html#changed-required-java-version-to-17">Changed  required Java version to 17</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../migration/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../migration/index.html#overview-of-migration-steps">Overview of migration steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../migration/index.html#details-of-migration-steps">Details of migration steps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../migration/index.html#nablarch-version-upgrade">Nablarch version upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../migration/index.html#compatible-with-jakarta-ee">Compatible with Jakarta EE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../migration/index.html#migration-procedure-of-jsr352-compliant-batch-application">Migration procedure of JSR352-compliant Batch Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../migration/index.html#what-to-do-if-an-error-occurs-during-execution">What to do if an error occurs during execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../migration/index.html#appendix">Appendix</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../migration/index.html#correspondence-table-between-java-ee-and-jakarta-ee-specifications">Correspondence table between Java EE and Jakarta EE specifications</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../jakarta_ee/index.html">Regarding the specification name of Jakarta EE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../jakarta_ee/index.html#regarding-the-notation-of-acronyms">Regarding the notation of acronyms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jakarta_ee/index.html#regarding-features-that-have-been-renamed-in-nablarch-5-and-6">Regarding features that have been renamed in Nablarch 5 and 6</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../terms_of_use/index.html">Terms of Use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../terms_of_use/index.html#external-transmssion-of-information">External Transmssion of Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../terms_of_use/index.html#purpose-of-information-use">Purpose of Information Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../terms_of_use/index.html#destination-of-information">Destination of information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../terms_of_use/index.html#type-and-use-of-information">Type and use of information</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">∇Nablarch </a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Implementation Examples Per Use Cases</a> &raquo;</li>
      
    <li>Sample Request/Response Log Output Using Logbook</li>
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/nablarch" class="fa fa-github">GitHub</a>
    </li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://nablarch.github.io/docs/LATEST/doc/index.html" class="ja">日本語</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sample-request-response-log-output-using-logbook">
<h1>Sample Request/Response Log Output Using Logbook<a class="headerlink" href="#sample-request-response-log-output-using-logbook" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/nablarch/nablarch-biz-sample-all/tree/master/nablarch-logbook">Source code</a></p>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This sample uses <a class="reference external" href="https://github.com/zalando/logbook">Logbook</a> to log HTTP requests and responses.</p>
<div class="section" id="scope-of-this-sample">
<h3>Scope of this sample<a class="headerlink" href="#scope-of-this-sample" title="Permalink to this headline">¶</a></h3>
<p>Although Logbook supports a variety of message formats and output methods, this sample deals with the following implementation.</p>
<ul class="simple">
<li>Use Nablarch&#8217;s log output function for Logbook log output<ul>
<li>The linkage with Nablarch is achieved using <a class="reference internal" href="../../application_framework/adaptors/slf4j_adaptor.html#slf4j-adaptor"><span>SLF4J Adapter</span></a></li>
<li>Logs are output to standard output</li>
</ul>
</li>
<li>Use JAX-RS client for sending requests and JSON for message format<ul>
<li>Use Jersey as a JAX-RS client implementation</li>
</ul>
</li>
<li>Use <a class="reference external" href="https://github.com/json-path/JsonPath">JsonPath</a> to mask specific items in JSON format</li>
</ul>
</div>
</div>
<div class="section" id="how-to-use">
<h2>How to Use<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adding-dependent-libraries">
<h3>Adding Dependent Libraries<a class="headerlink" href="#adding-dependent-libraries" title="Permalink to this headline">¶</a></h3>
<p>To enable the use of Logbook, Jersey, and SLF4J Adapter, add the following dependencies to the project&#8217;s dependency settings.
Logbook has several modules available for the environment in which the system is used, so these should be added as well.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependencyManagement&gt;</span>
  <span class="nt">&lt;dependencies&gt;</span>
    ...
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.zalando<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>logbook-bom<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.9.0<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;scope&gt;</span>import<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.glassfish.jersey<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>jersey-bom<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.1.1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/dependencyManagement&gt;</span>
<span class="nt">&lt;dependencies&gt;</span>
  ...
  <span class="c">&lt;!-- SLF4J Adapter --&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.nablarch.integration<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>slf4j-nablarch-adaptor<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>

  <span class="c">&lt;!-- Logbook --&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.zalando<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>logbook-core<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.zalando<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>logbook-jaxrs<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.zalando<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>logbook-json<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>

  <span class="c">&lt;!-- Jersey --&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.glassfish.jersey.core<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>jersey-client<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.glassfish.jersey.media<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>jersey-media-json-jackson<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.glassfish.jersey.inject<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>jersey-hk2<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  ...
<span class="nt">&lt;/dependencies&gt;</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For the version to be specified for the dependency, set the appropriate version for the execution environment.</p>
</div>
</div>
<div class="section" id="configuration-of-log-properties">
<h3>Configuration of log.properties<a class="headerlink" href="#configuration-of-log-properties" title="Permalink to this headline">¶</a></h3>
<p>To output Logbook logs with Nablarch&#8217;s log output function, make the following settings in <strong>log.properties</strong>.
It is recommended to define a logger for Logbook, as Logbook requires the log level to be set to TRACE.</p>
<ul class="simple">
<li>Set the log level to TRACE, as Logbook logs output at the TRACE level.</li>
<li>Set the log output destination</li>
</ul>
<p>In this sample, the output destination is set to <a class="reference external" href="https://nablarch.github.io/docs/6u2/javadoc/nablarch/core/log/basic/StandardOutputLogWriter.html" title="nablarch.core.log.basic.StandardOutputLogWriter">StandardOutputLogWriter (output to standard output)</a></p>
<div class="highlight-properties"><div class="highlight"><pre><span></span>...
# Standard Output
writer.stdout.className=nablarch.core.log.basic.StandardOutputLogWriter
writer.stdout.formatter.className=nablarch.core.log.basic.BasicLogFormatter
writer.stdout.formatter.format=$date$ -$logLevel$- $runtimeLoggerName$ [$executionId$] boot_proc = [$bootProcess$] proc_sys = [$processingSystem$] req_id = [$requestId$] usr_id = [$userId$] $message$$information$$stackTrace$
...
# Available logger name order
availableLoggersNamesOrder=DEV,PER,SQL,MON,ACC,LOGBOOK,ROO
...
# Configuration of Logbook
loggers.LOGBOOK.nameRegex=org\\.zalando\\.logbook\\..*
loggers.LOGBOOK.level=TRACE
loggers.LOGBOOK.writerNames=stdout
...
</pre></div>
</div>
<p>See <a class="reference internal" href="../../application_framework/application_framework/libraries/log.html#log-basic-setting"><span>Configure log output</span></a> for Nablarch&#8217;s log output settings.</p>
</div>
<div class="section" id="configuration-of-logbook">
<span id="logbook-settings"></span><h3>Configuration of Logbook<a class="headerlink" href="#configuration-of-logbook" title="Permalink to this headline">¶</a></h3>
<p>To use Logbook, create an instance of the Logbook class with the necessary settings.</p>
<p>The default setting outputs information including all request and response bodies.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Generate Logbook (default setting)</span>
<span class="n">Logbook</span> <span class="n">logbook</span> <span class="o">=</span> <span class="n">Logbook</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
<p>Logbook has various settings, such as <code class="docutils literal"><span class="pre">condition</span></code> to set output conditions and <code class="docutils literal"><span class="pre">Filtering</span></code> to set mask processing.
For example, to perform body masking, use the <code class="docutils literal"><span class="pre">BodyFilter</span></code> method to set a filter to replace the value.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Generate Logbook (set to mask the id item in the body)</span>
<span class="n">Logbook</span> <span class="n">logbook</span> <span class="o">=</span> <span class="n">Logbook</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bodyFilter</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">&quot;$.id&quot;</span><span class="o">).</span><span class="na">replace</span><span class="o">(</span><span class="s">&quot;*****&quot;</span><span class="o">))</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Generate Logbook (set to mask id and username items in the array in the body)</span>
<span class="n">Logbook</span> <span class="n">logbook</span> <span class="o">=</span> <span class="n">Logbook</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bodyFilter</span><span class="o">(</span><span class="n">JsonPathBodyFilters</span><span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&quot;$[*].id&quot;</span><span class="o">).</span><span class="na">replace</span><span class="o">(</span><span class="s">&quot;*****&quot;</span><span class="o">))</span>
        <span class="o">.</span><span class="na">bodyFilter</span><span class="o">(</span><span class="n">JsonPathBodyFilters</span><span class="o">.</span><span class="na">jsonPath</span><span class="o">(</span><span class="s">&quot;$[*].username&quot;</span><span class="o">).</span><span class="na">replace</span><span class="o">(</span><span class="s">&quot;*****&quot;</span><span class="o">))</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/zalando/logbook/blob/main/README.md">Logbook&#8217;s README</a> for details on various settings.</p>
</div>
<div class="section" id="register-logbook-in-jax-rs-client">
<h3>Register Logbook in JAX-RS client<a class="headerlink" href="#register-logbook-in-jax-rs-client" title="Permalink to this headline">¶</a></h3>
<p>The generated Logbook instance can be used by registering it with the client to be used.</p>
<p>Logbook provides classes for registering with various clients,
In this sample, the <code class="docutils literal"><span class="pre">LogbookClientFilter</span></code> class is used because the JAX-RS client is used.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// Register Logbook in JAX-RS client</span>
<span class="n">Client</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ClientBuilder</span><span class="o">.</span><span class="na">newClient</span><span class="o">()</span>
                  <span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="k">new</span> <span class="n">LogbookClientFilter</span><span class="o">(</span><span class="n">logbook</span><span class="o">));</span>
</pre></div>
</div>
</div>
<div class="section" id="output-request-response-logs">
<h3>Output request/response logs<a class="headerlink" href="#output-request-response-logs" title="Permalink to this headline">¶</a></h3>
<p>When a request is sent and a response is received by a JAX-RS client that has registered a Logbook, a log is output.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;http://localhost:3000&quot;</span><span class="o">)</span>
                      <span class="o">.</span><span class="na">path</span><span class="o">(</span><span class="s">&quot;/users&quot;</span><span class="o">)</span>
                      <span class="o">.</span><span class="na">request</span><span class="o">()</span>
                      <span class="o">.</span><span class="na">get</span><span class="o">();</span>
</pre></div>
</div>
<p>In this sample, the output destination is set to standard output, so the following log is output to standard output.
The log is output in the format set in Nablarch&#8217;s log output function, and only the message part is output in the format set in Logbook.
In the default format of Logbook, the type of message (request sent or response received), headers, and body are output.</p>
<ul class="simple">
<li>Request log</li>
</ul>
<div class="highlight-text"><div class="highlight"><pre><span></span>2023-05-11 09:38:06.438 -TRACE- org.zalando.logbook.Logbook [202305110938060580001] boot_proc = [] proc_sys = [jaxrs] req_id = [/logbook/get] usr_id = [guest] Outgoing Request: bb068bcf35bc5226
Remote: localhost
GET http://localhost:3000/users HTTP/1.1
</pre></div>
</div>
<ul class="simple">
<li>Response log</li>
</ul>
<div class="highlight-text"><div class="highlight"><pre><span></span>2023-05-11 09:38:06.496 -TRACE- org.zalando.logbook.Logbook [202305110938060580001] boot_proc = [] proc_sys = [jaxrs] req_id = [/logbook/get] usr_id = [guest] Incoming Response: bb068bcf35bc5226
Duration: 57 ms
HTTP/1.1 200 OK
Connection: keep-alive
Content-Length: 213
Content-Type: application/json; charset=utf-8
Date: Thu, 11 May 2023 00:38:06 GMT
Keep-Alive: timeout=5

[{&quot;id&quot;:&quot;81b8b153-5ed5-4d42-be13-346f257b368d&quot;,&quot;username&quot;:&quot;Chasity91&quot;},{&quot;id&quot;:&quot;6b1e7b91-6a1f-4424-be3c-4e3d28dd59c0&quot;,&quot;username&quot;:&quot;Felton_Rohan&quot;},{&quot;id&quot;:&quot;622677a4-04e3-4b70-85dd-a0b7f7161678&quot;,&quot;username&quot;:&quot;Bella_Purdy&quot;}]
</pre></div>
</div>
<p>If the masking process described in <a class="reference internal" href="#logbook-settings"><span>Configuration of Logbook</span></a> above is set, the body in the log above is converted and output as follows.
(Here, we have set the id and username items in the array in the body to be masked.)</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>2023-05-11 09:48:37.513 -TRACE- org.zalando.logbook.Logbook [202305110948374650002] boot_proc = [] proc_sys = [jaxrs] req_id = [/logbook/get/mask] usr_id = [guest] Incoming Response: e1ba3d95197a4539
Duration: 9 ms
HTTP/1.1 200 OK
Connection: keep-alive
Content-Length: 213
Content-Type: application/json; charset=utf-8
Date: Thu, 11 May 2023 00:48:37 GMT
Keep-Alive: timeout=5

[{&quot;id&quot;:&quot;*****&quot;,&quot;username&quot;:&quot;*****&quot;},{&quot;id&quot;:&quot;*****&quot;,&quot;username&quot;:&quot;*****&quot;},{&quot;id&quot;:&quot;*****&quot;,&quot;username&quot;:&quot;*****&quot;}]
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>

    <hr/>

    <div role="contentinfo">
        <p>
            &copy; Copyright 2010-2024, TIS Inc.
        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'6u2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/custom.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>